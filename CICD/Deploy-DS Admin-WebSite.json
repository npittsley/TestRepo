{"source":2,"id":12,"revision":63,"name":"Deploy-DS Admin-WebSite","description":null,"createdBy":{"id":"aa6efae3-d562-4d41-ac28-eaa5dbcacad5","displayName":"Pittsley, Neil (US)","uniqueName":"NASA\\NPittsley","url":"http://teamfoundation.bcdtravel.com:8080/tfs/EnterpriseDevelopment/_apis/Identities/aa6efae3-d562-4d41-ac28-eaa5dbcacad5","imageUrl":"http://usgadtc0tfs01:8080/tfs/EnterpriseDevelopment/_api/_common/identityImage?id=aa6efae3-d562-4d41-ac28-eaa5dbcacad5"},"createdOn":"2020-04-22T13:18:59.627Z","modifiedBy":{"id":"aa6efae3-d562-4d41-ac28-eaa5dbcacad5","displayName":"Pittsley, Neil (US)","uniqueName":"NASA\\NPittsley","url":"http://teamfoundation.bcdtravel.com:8080/tfs/EnterpriseDevelopment/_apis/Identities/aa6efae3-d562-4d41-ac28-eaa5dbcacad5","imageUrl":"http://usgadtc0tfs01:8080/tfs/EnterpriseDevelopment/_api/_common/identityImage?id=aa6efae3-d562-4d41-ac28-eaa5dbcacad5"},"modifiedOn":"2020-06-19T18:42:05.783Z","lastRelease":null,"path":"\\","variables":{"source_deployment_server":{"value":"USGADTC0TFS05"},"source_deployment_path":{"value":"deploy\\DecisionSource\\Admin"},"timestamp":{"value":"from_script"},"zip_file":{"value":"$(Build.BuildNumber).zip"},"output_path":{"value":"$(Build.ArtifactStagingDirectory)"},"target_rollback_folder":{"value":"d$\\Backup\\Rollback\\DecisionSource\\Web\\Admin"},"target_backup_folder":{"value":"d$\\Backup\\$(timestamp)\\DecisionSource\\Web\\Admin"},"target_deployment_folder":{"value":"d$\\Deployment\\$(timestamp)\\DecisionSource\\Web\\Admin"},"live_website_folder":{"value":"d$\\Domains\\DecisionSource\\Web\\Admin"}},"variableGroups":[],"environments":[{"id":19,"name":"DEV-DSAdmin","rank":1,"owner":{"id":"aa6efae3-d562-4d41-ac28-eaa5dbcacad5","displayName":"Pittsley, Neil (US)","uniqueName":"NASA\\NPittsley","url":"http://teamfoundation.bcdtravel.com:8080/tfs/EnterpriseDevelopment/_apis/Identities/aa6efae3-d562-4d41-ac28-eaa5dbcacad5","imageUrl":"http://usgadtc0tfs01:8080/tfs/EnterpriseDevelopment/_api/_common/identityImage?id=aa6efae3-d562-4d41-ac28-eaa5dbcacad5"},"variables":{"target_machinename":{"value":"uscdc01dwapp007"},"dashboardreporting_connection_string":{"value":"Data Source=DSDEVSQL01;Initial Catalog=DashboardReporting;Persist Security Info=True;User ID=DashboardReporting;Password=Syster7Seven;Application Name=DSAdmin"},"pretrip_connection_string":{"value":"Data Source=DSDEVSQL01;Initial Catalog=PostTripDM;Persist Security Info=True;User ID=DashboardReporting ;Password=Syster7Seven;Application Name=DSAdmin"},"posttrip_connection_string":{"value":"Data Source=DSDEVSQL01;Initial Catalog=PostTripDM;Persist Security Info=True;User ID=DashboardReporting ;Password=Syster7Seven;Application Name=DSAdmin"},"intelliguide_connection_string":{"value":"Server=DSDEVSQL01;Database=BTITravelNet_QS;Uid=btitravelnetuser;Pwd=@sql2005;Application Name=DSAdmin"},"bti_travelnet_connection_string":{"value":"Server=DSDEVSQL01;Database=BTITravelNet_QS;Uid=btitravelnetuser;Pwd=@sql2005;Application Name=DSAdmin"},"report_server_url":{"value":"http://decisionsource-QAfuturereporting.bcdtravel.com/reportserver/"},"ssrs_report_viewer_url":{"value":"$(report_server_url)Pages/ReportViewer.aspx?"},"main_app_physical_path":{"value":"\\\\uscdc01dwapp007\\d$\\Domains\\DecisionSource\\WebSites\\Main"},"main_app_url":{"value":"http://uscdc01dwapp007/ds"}},"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":65}]},"deployStep":{"tasks":[],"id":66},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":false,"isNotificationOn":true,"approver":{"id":"aa6efae3-d562-4d41-ac28-eaa5dbcacad5","displayName":"Pittsley, Neil (US)","uniqueName":"NASA\\NPittsley","url":"http://teamfoundation.bcdtravel.com:8080/tfs/EnterpriseDevelopment/_apis/Identities/aa6efae3-d562-4d41-ac28-eaa5dbcacad5","imageUrl":"http://usgadtc0tfs01:8080/tfs/EnterpriseDevelopment/_api/_common/identityImage?id=aa6efae3-d562-4d41-ac28-eaa5dbcacad5"},"id":206},{"rank":1,"isAutomated":false,"isNotificationOn":true,"approver":{"id":"63e68b1f-ca8a-4d86-9536-f6424f2e8fe5","displayName":"Wu, Wenyi (US)","uniqueName":"NASA\\wwu01","url":"http://teamfoundation.bcdtravel.com:8080/tfs/EnterpriseDevelopment/_apis/Identities/63e68b1f-ca8a-4d86-9536-f6424f2e8fe5","imageUrl":"http://usgadtc0tfs01:8080/tfs/EnterpriseDevelopment/_api/_common/identityImage?id=63e68b1f-ca8a-4d86-9536-f6424f2e8fe5"},"id":207}],"approvalOptions":{"requiredApproverCount":1,"releaseCreatorCanBeApprover":true,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMintues":43200}},"deployPhases":[{"deploymentInput":{"parallelExecution":{"parallelExecutionType":"none"},"skipArtifactsDownload":false,"timeoutInMinutes":0,"queueId":44,"demands":[],"enableAccessToken":false},"rank":1,"phaseType":1,"name":"Run on agent","workflowTasks":[{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"1.*","name":"PowerShell Set timestamp variable for folder naming","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"scriptType":"inlineScript","scriptName":"","arguments":"","inlineScript":"$date=$(Get-Date -UFormat \"%Y_%m_%d_%R\") | ForEach-Object{$_ -replace \":\",\"_\"}\nWrite-Host \"##vso[task.setvariable variable=timestamp]$date\"","workingFolder":"","failOnStandardError":"true"}},{"taskId":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","version":"2.*","name":"Backup Website","enabled":false,"alwaysRun":false,"continueOnError":true,"timeoutInMinutes":0,"definitionType":"task","inputs":{"SourceFolder":"\\\\$(target_machinename)\\$(live_website_folder)","Contents":"**\n!log4net/**\n!DSExportTemp/**","TargetFolder":"\\\\$(target_machinename)\\$(target_backup_folder)","CleanTargetFolder":"true","OverWrite":"true","flattenFolders":"false"}},{"taskId":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","version":"2.*","name":"Backup for Rollback","enabled":false,"alwaysRun":false,"continueOnError":true,"timeoutInMinutes":0,"definitionType":"task","inputs":{"SourceFolder":"\\\\$(target_machinename)\\$(live_website_folder)","Contents":"**","TargetFolder":"\\\\$(target_machinename)\\$(target_rollback_folder)","CleanTargetFolder":"true","OverWrite":"true","flattenFolders":"false"}},{"taskId":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","version":"2.*","name":"Copy from CentralDeploymentDirectory to Server Deployment Directory","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"SourceFolder":"\\\\$(source_deployment_server)\\$(source_deployment_path)","Contents":"$(zip_file)","TargetFolder":"\\\\$(target_machinename)\\$(target_deployment_folder)","CleanTargetFolder":"false","OverWrite":"true","flattenFolders":"false"}},{"taskId":"5e1e3830-fbfb-11e5-aab1-090c92bc4988","version":"1.*","name":"Extract files ","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"archiveFilePatterns":"\\\\$(target_machinename)\\$(target_deployment_folder)\\$(zip_file)","destinationFolder":"\\\\$(target_machinename)\\$(target_deployment_folder)\\for_deploy","cleanDestinationFolder":"false"}},{"taskId":"a8515ec8-7254-4ffd-912c-86772e2b5962","version":"3.*","name":"Replace tokens in Web.config","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"rootDirectory":"\\\\$(target_machinename)\\$(target_deployment_folder)\\for_deploy","targetFiles":"Web.config","encoding":"auto","writeBOM":"true","escapeType":"auto","escapeChar":"","charsToEscape":"","verbosity":"normal","actionOnMissing":"warn","keepToken":"false","tokenPrefix":"#{","tokenSuffix":"}#","useLegacyPattern":"false","emptyValue":"(empty)","variableFiles":"","variableSeparator":".","enableTelemetry":"true"}},{"taskId":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","version":"2.*","name":"Copy WebSite files to LIVE ","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"SourceFolder":"\\\\$(target_machinename)\\$(target_deployment_folder)\\for_deploy","Contents":"**","TargetFolder":"\\\\$(target_machinename)\\$(live_website_folder)","CleanTargetFolder":"true","OverWrite":"true","flattenFolders":"false"}}]}],"environmentOptions":{"emailNotificationType":"OnlyOnFailure","emailRecipients":"release.environment.owner;release.creator","skipArtifactsDownload":false,"timeoutInMinutes":0,"enableAccessToken":false,"publishDeploymentStatus":false},"demands":[],"conditions":[{"name":"ReleaseStarted","conditionType":1,"value":""}],"executionPolicy":{"concurrencyCount":1,"queueDepthCount":1},"schedules":[],"retentionPolicy":{"daysToKeep":30,"releasesToKeep":3,"retainBuild":true}},{"id":44,"name":"QA-DSAdmin","rank":2,"owner":{"id":"aa6efae3-d562-4d41-ac28-eaa5dbcacad5","displayName":"Pittsley, Neil (US)","uniqueName":"NASA\\NPittsley","url":"http://teamfoundation.bcdtravel.com:8080/tfs/EnterpriseDevelopment/_apis/Identities/aa6efae3-d562-4d41-ac28-eaa5dbcacad5","imageUrl":"http://usgadtc0tfs01:8080/tfs/EnterpriseDevelopment/_api/_common/identityImage?id=aa6efae3-d562-4d41-ac28-eaa5dbcacad5"},"variables":{"target_machinename":{"value":"uscdc01dwweb025"},"dashboardreporting_connection_string":{"value":"Data Source=DSQAFSQL01;Initial Catalog=DashboardReporting;Persist Security Info=True;User ID=DashboardReporting;Password=@ins57Seven;Application Name=DSAdmin"},"pretrip_connection_string":{"value":"Server=DSQAFSQL01;Database=PreTripDataMart;Uid=Reporting;Pwd=@ins57Seven;Application Name=DSAdmin"},"posttrip_connection_string":{"value":"Data Source=DSQAFSQL01;Initial Catalog=PostTripDM;Persist Security Info=True;User ID=Reporting;Password=@ins57Seven;Application Name=DSAdmin"},"intelliguide_connection_string":{"value":"Data Source=DSQAFSQL01;Initial Catalog=IntelliguideData;Persist Security Info=True;User ID=DashboardReporting;Password=@ins57Seven;Application Name=DSAdmin"},"bti_travelnet_connection_string":{"value":"Server=DSDEVSQL01;Database=BTITravelNet_QS;Uid=btitravelnetuser;Pwd=@sql2005;Application Name=DSAdmin"},"report_server_url":{"value":"http://decisionsource-QAfuturereporting.bcdtravel.com/reportserver/"},"ssrs_report_viewer_url":{"value":"$(report_server_url)Pages/ReportViewer.aspx?"},"main_app_physical_path":{"value":"\\\\uscdc01dwweb024\\d$\\Domains\\DecisionSource\\WebSites\\Main"},"main_app_url":{"value":"http://uscdc01dwweb024/DS"}},"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":false,"isNotificationOn":true,"approver":{"id":"23b6a59f-9499-44e4-a635-315712614487","displayName":"Cleland, Deanna (US)","uniqueName":"NASA\\dcleland","url":"http://teamfoundation.bcdtravel.com:8080/tfs/EnterpriseDevelopment/_apis/Identities/23b6a59f-9499-44e4-a635-315712614487","imageUrl":"http://usgadtc0tfs01:8080/tfs/EnterpriseDevelopment/_api/_common/identityImage?id=23b6a59f-9499-44e4-a635-315712614487"},"id":202}],"approvalOptions":{"requiredApproverCount":0,"releaseCreatorCanBeApprover":true,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMintues":43200}},"deployStep":{"tasks":[],"id":167},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":false,"isNotificationOn":true,"approver":{"id":"23b6a59f-9499-44e4-a635-315712614487","displayName":"Cleland, Deanna (US)","uniqueName":"NASA\\dcleland","url":"http://teamfoundation.bcdtravel.com:8080/tfs/EnterpriseDevelopment/_apis/Identities/23b6a59f-9499-44e4-a635-315712614487","imageUrl":"http://usgadtc0tfs01:8080/tfs/EnterpriseDevelopment/_api/_common/identityImage?id=23b6a59f-9499-44e4-a635-315712614487"},"id":205}],"approvalOptions":{"requiredApproverCount":0,"releaseCreatorCanBeApprover":true,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMintues":43200}},"deployPhases":[{"deploymentInput":{"parallelExecution":{"parallelExecutionType":"none"},"skipArtifactsDownload":false,"timeoutInMinutes":0,"queueId":44,"demands":[],"enableAccessToken":false},"rank":1,"phaseType":1,"name":"Run on agent","workflowTasks":[{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"1.*","name":"PowerShell Set timestamp variable for folder naming","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"scriptType":"inlineScript","scriptName":"","arguments":"","inlineScript":"$date=$(Get-Date -UFormat \"%Y_%m_%d_%R\") | ForEach-Object{$_ -replace \":\",\"_\"}\nWrite-Host \"##vso[task.setvariable variable=timestamp]$date\"","workingFolder":"","failOnStandardError":"true"}},{"taskId":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","version":"2.*","name":"Backup Website","enabled":false,"alwaysRun":false,"continueOnError":true,"timeoutInMinutes":0,"definitionType":"task","inputs":{"SourceFolder":"\\\\$(target_machinename)\\$(live_website_folder)","Contents":"**\n!log4net/**\n!DSExportTemp/**","TargetFolder":"\\\\$(target_machinename)\\$(target_backup_folder)","CleanTargetFolder":"true","OverWrite":"true","flattenFolders":"false"}},{"taskId":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","version":"2.*","name":"Backup for Rollback","enabled":false,"alwaysRun":false,"continueOnError":true,"timeoutInMinutes":0,"definitionType":"task","inputs":{"SourceFolder":"\\\\$(target_machinename)\\$(live_website_folder)","Contents":"**","TargetFolder":"\\\\$(target_machinename)\\$(target_rollback_folder)","CleanTargetFolder":"true","OverWrite":"true","flattenFolders":"false"}},{"taskId":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","version":"2.*","name":"Copy from CentralDeploymentDirectory to Server Deployment Directory","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"SourceFolder":"\\\\$(source_deployment_server)\\$(source_deployment_path)","Contents":"$(zip_file)","TargetFolder":"\\\\$(target_machinename)\\$(target_deployment_folder)","CleanTargetFolder":"false","OverWrite":"true","flattenFolders":"false"}},{"taskId":"5e1e3830-fbfb-11e5-aab1-090c92bc4988","version":"1.*","name":"Extract files ","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"archiveFilePatterns":"\\\\$(target_machinename)\\$(target_deployment_folder)\\$(zip_file)","destinationFolder":"\\\\$(target_machinename)\\$(target_deployment_folder)\\for_deploy","cleanDestinationFolder":"false"}},{"taskId":"a8515ec8-7254-4ffd-912c-86772e2b5962","version":"3.*","name":"Replace tokens in Web.config","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"rootDirectory":"\\\\$(target_machinename)\\$(target_deployment_folder)\\for_deploy","targetFiles":"Web.config","encoding":"auto","writeBOM":"true","escapeType":"auto","escapeChar":"","charsToEscape":"","verbosity":"normal","actionOnMissing":"warn","keepToken":"false","tokenPrefix":"#{","tokenSuffix":"}#","useLegacyPattern":"false","emptyValue":"(empty)","variableFiles":"","variableSeparator":".","enableTelemetry":"true"}},{"taskId":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","version":"2.*","name":"Copy WebSite files to LIVE ","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"SourceFolder":"\\\\$(target_machinename)\\$(target_deployment_folder)\\for_deploy","Contents":"**","TargetFolder":"\\\\$(target_machinename)\\$(live_website_folder)","CleanTargetFolder":"true","OverWrite":"true","flattenFolders":"false"}}]}],"environmentOptions":{"emailNotificationType":"OnlyOnFailure","emailRecipients":"release.environment.owner;release.creator","skipArtifactsDownload":false,"timeoutInMinutes":0,"enableAccessToken":false,"publishDeploymentStatus":false},"demands":[],"conditions":[{"name":"DEV-DSAdmin","conditionType":2,"value":"4"}],"executionPolicy":{"concurrencyCount":0,"queueDepthCount":0},"schedules":[],"retentionPolicy":{"daysToKeep":30,"releasesToKeep":3,"retainBuild":true}},{"id":45,"name":"UAT14-DSAdmin","rank":3,"owner":{"id":"aa6efae3-d562-4d41-ac28-eaa5dbcacad5","displayName":"Pittsley, Neil (US)","uniqueName":"NASA\\NPittsley","url":"http://teamfoundation.bcdtravel.com:8080/tfs/EnterpriseDevelopment/_apis/Identities/aa6efae3-d562-4d41-ac28-eaa5dbcacad5","imageUrl":"http://usgadtc0tfs01:8080/tfs/EnterpriseDevelopment/_api/_common/identityImage?id=aa6efae3-d562-4d41-ac28-eaa5dbcacad5"},"variables":{"target_machinename":{"value":"uscdc01dwweb014"},"dashboardreporting_connection_string":{"value":"Data Source=DSUAFSQL01;Initial Catalog=DashboardReporting;Persist Security Info=True;User ID=DashboardReporting;Password=@ins67Seven;Application Name=DSAdmin"},"pretrip_connection_string":{"value":"Server=DSUAFSQL01;Database=PreTripDataMart;Uid=Reporting;Pwd=@ins67Seven;Application Name=DSAdmin"},"posttrip_connection_string":{"value":"Data Source=DSUAFSQL01;Initial Catalog=PostTripDM;Persist Security Info=True;User ID=Reporting;Password=@ins67Seven;Application Name=DSAdmin"},"intelliguide_connection_string":{"value":"Data Source=DSUAFSQL01;Initial Catalog=IntelliguideData;Persist Security Info=True;User ID=DashboardReporting;Password=@ins67Seven;Application Name=DSAdmin"},"bti_travelnet_connection_string":{"value":"Server=DSUAFSQL01;Database=BTITravelNet_QS;Uid=btitravelnetuser;Pwd=@sql2005;Application Name=DSAdmin"},"report_server_url":{"value":"http://decisionsource-uatfuturereporting.bcdtravel.com/reportserver/"},"ssrs_report_viewer_url":{"value":"$(report_server_url)Pages/ReportViewer.aspx?"},"main_app_physical_path":{"value":"\\\\uscdc01dwweb014\\d$\\Domains\\DecisionSource\\WebSites\\Main"},"main_app_url":{"value":"https://decisionsource-uatfuture.bcdtravel.com"}},"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":false,"isNotificationOn":true,"approver":{"id":"57e02079-2f68-40ac-9401-8881a0a3efa5","displayName":"Quicksell, Yvonne (US)","uniqueName":"NASA\\yquickse","url":"http://teamfoundation.bcdtravel.com:8080/tfs/EnterpriseDevelopment/_apis/Identities/57e02079-2f68-40ac-9401-8881a0a3efa5","imageUrl":"http://usgadtc0tfs01:8080/tfs/EnterpriseDevelopment/_api/_common/identityImage?id=57e02079-2f68-40ac-9401-8881a0a3efa5"},"id":203}],"approvalOptions":{"requiredApproverCount":0,"releaseCreatorCanBeApprover":true,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMintues":43200}},"deployStep":{"tasks":[],"id":171},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":false,"isNotificationOn":true,"approver":{"id":"57e02079-2f68-40ac-9401-8881a0a3efa5","displayName":"Quicksell, Yvonne (US)","uniqueName":"NASA\\yquickse","url":"http://teamfoundation.bcdtravel.com:8080/tfs/EnterpriseDevelopment/_apis/Identities/57e02079-2f68-40ac-9401-8881a0a3efa5","imageUrl":"http://usgadtc0tfs01:8080/tfs/EnterpriseDevelopment/_api/_common/identityImage?id=57e02079-2f68-40ac-9401-8881a0a3efa5"},"id":204}],"approvalOptions":{"requiredApproverCount":0,"releaseCreatorCanBeApprover":true,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMintues":43200}},"deployPhases":[{"deploymentInput":{"parallelExecution":{"parallelExecutionType":"none"},"skipArtifactsDownload":false,"timeoutInMinutes":0,"queueId":44,"demands":[],"enableAccessToken":false},"rank":1,"phaseType":1,"name":"Run on agent","workflowTasks":[{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"1.*","name":"PowerShell Set timestamp variable for folder naming","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"scriptType":"inlineScript","scriptName":"","arguments":"","inlineScript":"$date=$(Get-Date -UFormat \"%Y_%m_%d_%R\") | ForEach-Object{$_ -replace \":\",\"_\"}\nWrite-Host \"##vso[task.setvariable variable=timestamp]$date\"","workingFolder":"","failOnStandardError":"true"}},{"taskId":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","version":"2.*","name":"Backup Website","enabled":false,"alwaysRun":false,"continueOnError":true,"timeoutInMinutes":0,"definitionType":"task","inputs":{"SourceFolder":"\\\\$(target_machinename)\\$(live_website_folder)","Contents":"**\n!log4net/**\n!DSExportTemp/**","TargetFolder":"\\\\$(target_machinename)\\$(target_backup_folder)","CleanTargetFolder":"true","OverWrite":"true","flattenFolders":"false"}},{"taskId":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","version":"2.*","name":"Backup for Rollback","enabled":false,"alwaysRun":false,"continueOnError":true,"timeoutInMinutes":0,"definitionType":"task","inputs":{"SourceFolder":"\\\\$(target_machinename)\\$(live_website_folder)","Contents":"**","TargetFolder":"\\\\$(target_machinename)\\$(target_rollback_folder)","CleanTargetFolder":"true","OverWrite":"true","flattenFolders":"false"}},{"taskId":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","version":"2.*","name":"Copy from CentralDeploymentDirectory to Server Deployment Directory","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"SourceFolder":"\\\\$(source_deployment_server)\\$(source_deployment_path)","Contents":"$(zip_file)","TargetFolder":"\\\\$(target_machinename)\\$(target_deployment_folder)","CleanTargetFolder":"false","OverWrite":"true","flattenFolders":"false"}},{"taskId":"5e1e3830-fbfb-11e5-aab1-090c92bc4988","version":"1.*","name":"Extract files ","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"archiveFilePatterns":"\\\\$(target_machinename)\\$(target_deployment_folder)\\$(zip_file)","destinationFolder":"\\\\$(target_machinename)\\$(target_deployment_folder)\\for_deploy","cleanDestinationFolder":"false"}},{"taskId":"a8515ec8-7254-4ffd-912c-86772e2b5962","version":"3.*","name":"Replace tokens in Web.config","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"rootDirectory":"\\\\$(target_machinename)\\$(target_deployment_folder)\\for_deploy","targetFiles":"Web.config","encoding":"auto","writeBOM":"true","escapeType":"auto","escapeChar":"","charsToEscape":"","verbosity":"normal","actionOnMissing":"warn","keepToken":"false","tokenPrefix":"#{","tokenSuffix":"}#","useLegacyPattern":"false","emptyValue":"(empty)","variableFiles":"","variableSeparator":".","enableTelemetry":"true"}},{"taskId":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","version":"2.*","name":"Copy WebSite files to LIVE ","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"SourceFolder":"\\\\$(target_machinename)\\$(target_deployment_folder)\\for_deploy","Contents":"**","TargetFolder":"\\\\$(target_machinename)\\$(live_website_folder)","CleanTargetFolder":"true","OverWrite":"true","flattenFolders":"false"}}]}],"environmentOptions":{"emailNotificationType":"OnlyOnFailure","emailRecipients":"release.environment.owner;release.creator","skipArtifactsDownload":false,"timeoutInMinutes":0,"enableAccessToken":false,"publishDeploymentStatus":false},"demands":[],"conditions":[{"name":"QA-DSAdmin","conditionType":2,"value":"4"}],"executionPolicy":{"concurrencyCount":0,"queueDepthCount":0},"schedules":[],"retentionPolicy":{"daysToKeep":30,"releasesToKeep":3,"retainBuild":true}},{"id":46,"name":"UAT15-DSAdmin","rank":4,"owner":{"id":"aa6efae3-d562-4d41-ac28-eaa5dbcacad5","displayName":"Pittsley, Neil (US)","uniqueName":"NASA\\NPittsley","url":"http://teamfoundation.bcdtravel.com:8080/tfs/EnterpriseDevelopment/_apis/Identities/aa6efae3-d562-4d41-ac28-eaa5dbcacad5","imageUrl":"http://usgadtc0tfs01:8080/tfs/EnterpriseDevelopment/_api/_common/identityImage?id=aa6efae3-d562-4d41-ac28-eaa5dbcacad5"},"variables":{"target_machinename":{"value":"uscdc01dwweb015"},"adminuser":{"value":"nasa\\npittsley "},"adminpwd":{"value":null,"isSecret":true},"dashboardreporting_connection_string":{"value":"Data Source=DSUAFSQL01;Initial Catalog=DashboardReporting;Persist Security Info=True;User ID=DashboardReporting;Password=@ins67Seven;Application Name=DSAdmin"},"pretrip_connection_string":{"value":"Server=DSUAFSQL01;Database=PreTripDataMart;Uid=Reporting;Pwd=@ins67Seven;Application Name=DSAdmin"},"posttrip_connection_string":{"value":"Data Source=DSUAFSQL01;Initial Catalog=PostTripDM;Persist Security Info=True;User ID=Reporting;Password=@ins67Seven;Application Name=DSAdmin"},"intelliguide_connection_string":{"value":"Data Source=DSUAFSQL01;Initial Catalog=IntelliguideData;Persist Security Info=True;User ID=DashboardReporting;Password=@ins67Seven;Application Name=DSAdmin"},"bti_travelnet_connection_string":{"value":"Server=DSUAFSQL01;Database=BTITravelNet_QS;Uid=btitravelnetuser;Pwd=@sql2005;Application Name=DSAdmin"},"report_server_url":{"value":"http://decisionsource-uatfuturereporting.bcdtravel.com/reportserver/"},"ssrs_report_viewer_url":{"value":"$(report_server_url)Pages/ReportViewer.aspx?"},"main_app_physical_path":{"value":"\\\\uscdc01dwweb015\\d$\\Domains\\DecisionSource\\WebSites\\Main"},"main_app_url":{"value":"https://decisionsource-uatfuture.bcdtravel.com"}},"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":173}]},"deployStep":{"tasks":[],"id":174},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":175}]},"deployPhases":[{"deploymentInput":{"parallelExecution":{"parallelExecutionType":"none"},"skipArtifactsDownload":false,"timeoutInMinutes":0,"queueId":44,"demands":[],"enableAccessToken":false},"rank":1,"phaseType":1,"name":"Run on agent","workflowTasks":[{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"1.*","name":"PowerShell Set timestamp variable for folder naming","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"scriptType":"inlineScript","scriptName":"","arguments":"","inlineScript":"$date=$(Get-Date -UFormat \"%Y_%m_%d_%R\") | ForEach-Object{$_ -replace \":\",\"_\"}\nWrite-Host \"##vso[task.setvariable variable=timestamp]$date\"","workingFolder":"","failOnStandardError":"true"}},{"taskId":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","version":"2.*","name":"Backup Website","enabled":false,"alwaysRun":false,"continueOnError":true,"timeoutInMinutes":0,"definitionType":"task","inputs":{"SourceFolder":"\\\\$(target_machinename)\\$(live_website_folder)","Contents":"**\n!log4net/**\n!DSExportTemp/**","TargetFolder":"\\\\$(target_machinename)\\$(target_backup_folder)","CleanTargetFolder":"true","OverWrite":"true","flattenFolders":"false"}},{"taskId":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","version":"2.*","name":"Backup for Rollback","enabled":false,"alwaysRun":false,"continueOnError":true,"timeoutInMinutes":0,"definitionType":"task","inputs":{"SourceFolder":"\\\\$(target_machinename)\\$(live_website_folder)","Contents":"**","TargetFolder":"\\\\$(target_machinename)\\$(target_rollback_folder)","CleanTargetFolder":"true","OverWrite":"true","flattenFolders":"false"}},{"taskId":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","version":"2.*","name":"Copy from CentralDeploymentDirectory to Server Deployment Directory","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"SourceFolder":"\\\\$(source_deployment_server)\\$(source_deployment_path)","Contents":"$(zip_file)","TargetFolder":"\\\\$(target_machinename)\\$(target_deployment_folder)","CleanTargetFolder":"false","OverWrite":"true","flattenFolders":"false"}},{"taskId":"5e1e3830-fbfb-11e5-aab1-090c92bc4988","version":"1.*","name":"Extract files ","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"archiveFilePatterns":"\\\\$(target_machinename)\\$(target_deployment_folder)\\$(zip_file)","destinationFolder":"\\\\$(target_machinename)\\$(target_deployment_folder)\\for_deploy","cleanDestinationFolder":"false"}},{"taskId":"a8515ec8-7254-4ffd-912c-86772e2b5962","version":"3.*","name":"Replace tokens in Web.config","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"rootDirectory":"\\\\$(target_machinename)\\$(target_deployment_folder)\\for_deploy","targetFiles":"Web.config","encoding":"auto","writeBOM":"true","escapeType":"auto","escapeChar":"","charsToEscape":"","verbosity":"normal","actionOnMissing":"warn","keepToken":"false","tokenPrefix":"#{","tokenSuffix":"}#","useLegacyPattern":"false","emptyValue":"(empty)","variableFiles":"","variableSeparator":".","enableTelemetry":"true"}},{"taskId":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","version":"2.*","name":"Copy WebSite files to LIVE ","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"SourceFolder":"\\\\$(target_machinename)\\$(target_deployment_folder)\\for_deploy","Contents":"**","TargetFolder":"\\\\$(target_machinename)\\$(live_website_folder)","CleanTargetFolder":"true","OverWrite":"true","flattenFolders":"false"}}]}],"environmentOptions":{"emailNotificationType":"OnlyOnFailure","emailRecipients":"release.environment.owner;release.creator","skipArtifactsDownload":false,"timeoutInMinutes":0,"enableAccessToken":false,"publishDeploymentStatus":false},"demands":[],"conditions":[{"name":"UAT14-DSAdmin","conditionType":2,"value":"4"}],"executionPolicy":{"concurrencyCount":0,"queueDepthCount":0},"schedules":[],"retentionPolicy":{"daysToKeep":30,"releasesToKeep":3,"retainBuild":true}},{"id":71,"name":"Prod30-DSAdmin","rank":5,"owner":{"id":"aa6efae3-d562-4d41-ac28-eaa5dbcacad5","displayName":"Pittsley, Neil (US)","uniqueName":"NASA\\NPittsley","url":"http://teamfoundation.bcdtravel.com:8080/tfs/EnterpriseDevelopment/_apis/Identities/aa6efae3-d562-4d41-ac28-eaa5dbcacad5","imageUrl":"http://usgadtc0tfs01:8080/tfs/EnterpriseDevelopment/_api/_common/identityImage?id=aa6efae3-d562-4d41-ac28-eaa5dbcacad5"},"variables":{"target_machinename":{"value":"USCDC01PWWEB030"},"dashboardreporting_connection_string":{"value":"Data Source=DBP64CLU23SQLX2;Initial Catalog=DashboardReporting;Persist Security Info=True;User ID=DashboardReporting;Password=@Star7Seven;Application Name=DSAdmin"},"pretrip_connection_string":{"value":"Server=DBP64CLU23SQLX2;Database=PreTripDataMart;Uid=Reporting;Pwd=@Star7Seven;Application Name=DSAdmin"},"posttrip_connection_string":{"value":"Data Source=DBP64CLU23SQLX2;Initial Catalog=PostTripDM;Persist Security Info=True;User ID=Reporting;Password=@Star7Seven"},"intelliguide_connection_string":{"value":"Data Source=DBP64CLU23SQLX2;Initial Catalog=IntelliguideData;Persist Security Info=True;User ID=DashboardReporting;Password=@Star7Seven;Application Name=DSAdmin"},"bti_travelnet_connection_string":{"value":"Data Source=10.30.21.96,1997;Initial Catalog=BTITravelNet;UID=BTITravelNetUser;PWD=Travel;Application Name=DSAdmin"},"report_server_url":{"value":"http://usgadtc3ds07/reportserver/"},"ssrs_report_viewer_url":{"value":"http://usgadtc3ds07/reportserver/Pages/ReportViewer.aspx?"},"main_app_physical_path":{"value":"\\\\USGALNX0APP39.worldtravel.local\\D$\\DS"},"main_app_url":{"value":"http://usgalnx0app39/DS"}},"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":false,"isNotificationOn":true,"approver":{"id":"d5a70bb5-47f9-42ba-a6c5-5dd6fd714706","displayName":"Singh, Sundeep (IN)","uniqueName":"NASA\\ssingh1","url":"http://teamfoundation.bcdtravel.com:8080/tfs/EnterpriseDevelopment/_apis/Identities/d5a70bb5-47f9-42ba-a6c5-5dd6fd714706","imageUrl":"http://usgadtc0tfs01:8080/tfs/EnterpriseDevelopment/_api/_common/identityImage?id=d5a70bb5-47f9-42ba-a6c5-5dd6fd714706"},"id":282}],"approvalOptions":{"requiredApproverCount":0,"releaseCreatorCanBeApprover":true,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMintues":43200}},"deployStep":{"tasks":[],"id":283},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":284}]},"deployPhases":[{"deploymentInput":{"parallelExecution":{"parallelExecutionType":"none"},"skipArtifactsDownload":false,"timeoutInMinutes":0,"queueId":44,"demands":[],"enableAccessToken":false},"rank":1,"phaseType":1,"name":"Run on agent","workflowTasks":[{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"1.*","name":"PowerShell Set timestamp variable for folder naming","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"scriptType":"inlineScript","scriptName":"","arguments":"","inlineScript":"$date=$(Get-Date -UFormat \"%Y_%m_%d_%R\") | ForEach-Object{$_ -replace \":\",\"_\"}\nWrite-Host \"##vso[task.setvariable variable=timestamp]$date\"","workingFolder":"","failOnStandardError":"true"}},{"taskId":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","version":"2.*","name":"Backup Website","enabled":false,"alwaysRun":false,"continueOnError":true,"timeoutInMinutes":0,"definitionType":"task","inputs":{"SourceFolder":"\\\\$(target_machinename)\\$(live_website_folder)","Contents":"**\n!log4net/**\n!DSExportTemp/**","TargetFolder":"\\\\$(target_machinename)\\$(target_backup_folder)","CleanTargetFolder":"true","OverWrite":"true","flattenFolders":"false"}},{"taskId":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","version":"2.*","name":"Backup for Rollback","enabled":false,"alwaysRun":false,"continueOnError":true,"timeoutInMinutes":0,"definitionType":"task","inputs":{"SourceFolder":"\\\\$(target_machinename)\\$(live_website_folder)","Contents":"**","TargetFolder":"\\\\$(target_machinename)\\$(target_rollback_folder)","CleanTargetFolder":"true","OverWrite":"true","flattenFolders":"false"}},{"taskId":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","version":"2.*","name":"Copy from CentralDeploymentDirectory to Server Deployment Directory","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"SourceFolder":"\\\\$(source_deployment_server)\\$(source_deployment_path)","Contents":"$(zip_file)","TargetFolder":"\\\\$(target_machinename)\\$(target_deployment_folder)","CleanTargetFolder":"false","OverWrite":"true","flattenFolders":"false"}},{"taskId":"5e1e3830-fbfb-11e5-aab1-090c92bc4988","version":"1.*","name":"Extract files ","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"archiveFilePatterns":"\\\\$(target_machinename)\\$(target_deployment_folder)\\$(zip_file)","destinationFolder":"\\\\$(target_machinename)\\$(target_deployment_folder)\\for_deploy","cleanDestinationFolder":"false"}},{"taskId":"a8515ec8-7254-4ffd-912c-86772e2b5962","version":"3.*","name":"Replace tokens in Web.config","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"rootDirectory":"\\\\$(target_machinename)\\$(target_deployment_folder)\\for_deploy","targetFiles":"Web.config","encoding":"auto","writeBOM":"true","escapeType":"auto","escapeChar":"","charsToEscape":"","verbosity":"normal","actionOnMissing":"warn","keepToken":"false","tokenPrefix":"#{","tokenSuffix":"}#","useLegacyPattern":"false","emptyValue":"(empty)","variableFiles":"","variableSeparator":".","enableTelemetry":"true"}},{"taskId":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","version":"2.*","name":"Copy WebSite files to LIVE ","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"SourceFolder":"\\\\$(target_machinename)\\$(target_deployment_folder)\\for_deploy","Contents":"**","TargetFolder":"\\\\$(target_machinename)\\$(live_website_folder)","CleanTargetFolder":"true","OverWrite":"true","flattenFolders":"false"}}]}],"environmentOptions":{"emailNotificationType":"OnlyOnFailure","emailRecipients":"release.environment.owner;release.creator","skipArtifactsDownload":false,"timeoutInMinutes":0,"enableAccessToken":false,"publishDeploymentStatus":false},"demands":[],"conditions":[{"name":"UAT15-DSAdmin","conditionType":2,"value":"4"}],"executionPolicy":{"concurrencyCount":0,"queueDepthCount":0},"schedules":[],"retentionPolicy":{"daysToKeep":30,"releasesToKeep":3,"retainBuild":true}},{"id":72,"name":"Prod31-DSAdmin","rank":6,"owner":{"id":"aa6efae3-d562-4d41-ac28-eaa5dbcacad5","displayName":"Pittsley, Neil (US)","uniqueName":"NASA\\NPittsley","url":"http://teamfoundation.bcdtravel.com:8080/tfs/EnterpriseDevelopment/_apis/Identities/aa6efae3-d562-4d41-ac28-eaa5dbcacad5","imageUrl":"http://usgadtc0tfs01:8080/tfs/EnterpriseDevelopment/_api/_common/identityImage?id=aa6efae3-d562-4d41-ac28-eaa5dbcacad5"},"variables":{"target_machinename":{"value":"USCDC01PWWEB031"},"dashboardreporting_connection_string":{"value":"Data Source=DBP64CLU23SQLX2;Initial Catalog=DashboardReporting;Persist Security Info=True;User ID=DashboardReporting;Password=@Star7Seven;Application Name=DSAdmin"},"pretrip_connection_string":{"value":"Server=DBP64CLU23SQLX2;Database=PreTripDataMart;Uid=Reporting;Pwd=@Star7Seven;Application Name=DSAdmin"},"posttrip_connection_string":{"value":"Data Source=DBP64CLU23SQLX2;Initial Catalog=PostTripDM;Persist Security Info=True;User ID=Reporting;Password=@Star7Seven"},"intelliguide_connection_string":{"value":"Data Source=DBP64CLU23SQLX2;Initial Catalog=IntelliguideData;Persist Security Info=True;User ID=DashboardReporting;Password=@Star7Seven;Application Name=DSAdmin"},"bti_travelnet_connection_string":{"value":"Data Source=10.30.21.96,1997;Initial Catalog=BTITravelNet;UID=BTITravelNetUser;PWD=Travel;Application Name=DSAdmin"},"report_server_url":{"value":"http://usgadtc3ds07/reportserver/"},"ssrs_report_viewer_url":{"value":"http://usgadtc3ds07/reportserver/Pages/ReportViewer.aspx?"},"main_app_physical_path":{"value":"\\\\USGALNX0APP39.worldtravel.local\\D$\\DS"},"main_app_url":{"value":"http://usgalnx0app39/DS"}},"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":false,"isNotificationOn":false,"approver":{"id":"d5a70bb5-47f9-42ba-a6c5-5dd6fd714706","displayName":"Singh, Sundeep (IN)","uniqueName":"NASA\\ssingh1","url":"http://teamfoundation.bcdtravel.com:8080/tfs/EnterpriseDevelopment/_apis/Identities/d5a70bb5-47f9-42ba-a6c5-5dd6fd714706","imageUrl":"http://usgadtc0tfs01:8080/tfs/EnterpriseDevelopment/_api/_common/identityImage?id=d5a70bb5-47f9-42ba-a6c5-5dd6fd714706"},"id":285}],"approvalOptions":{"requiredApproverCount":0,"releaseCreatorCanBeApprover":true,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMintues":43200}},"deployStep":{"tasks":[],"id":290},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":291}]},"deployPhases":[{"deploymentInput":{"parallelExecution":{"parallelExecutionType":"none"},"skipArtifactsDownload":false,"timeoutInMinutes":0,"queueId":44,"demands":[],"enableAccessToken":false},"rank":1,"phaseType":1,"name":"Run on agent","workflowTasks":[{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"1.*","name":"PowerShell Set timestamp variable for folder naming","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"scriptType":"inlineScript","scriptName":"","arguments":"","inlineScript":"$date=$(Get-Date -UFormat \"%Y_%m_%d_%R\") | ForEach-Object{$_ -replace \":\",\"_\"}\nWrite-Host \"##vso[task.setvariable variable=timestamp]$date\"","workingFolder":"","failOnStandardError":"true"}},{"taskId":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","version":"2.*","name":"Backup Website","enabled":false,"alwaysRun":false,"continueOnError":true,"timeoutInMinutes":0,"definitionType":"task","inputs":{"SourceFolder":"\\\\$(target_machinename)\\$(live_website_folder)","Contents":"**\n!log4net/**\n!DSExportTemp/**","TargetFolder":"\\\\$(target_machinename)\\$(target_backup_folder)","CleanTargetFolder":"true","OverWrite":"true","flattenFolders":"false"}},{"taskId":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","version":"2.*","name":"Backup for Rollback","enabled":false,"alwaysRun":false,"continueOnError":true,"timeoutInMinutes":0,"definitionType":"task","inputs":{"SourceFolder":"\\\\$(target_machinename)\\$(live_website_folder)","Contents":"**","TargetFolder":"\\\\$(target_machinename)\\$(target_rollback_folder)","CleanTargetFolder":"true","OverWrite":"true","flattenFolders":"false"}},{"taskId":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","version":"2.*","name":"Copy from CentralDeploymentDirectory to Server Deployment Directory","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"SourceFolder":"\\\\$(source_deployment_server)\\$(source_deployment_path)","Contents":"$(zip_file)","TargetFolder":"\\\\$(target_machinename)\\$(target_deployment_folder)","CleanTargetFolder":"false","OverWrite":"true","flattenFolders":"false"}},{"taskId":"5e1e3830-fbfb-11e5-aab1-090c92bc4988","version":"1.*","name":"Extract files ","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"archiveFilePatterns":"\\\\$(target_machinename)\\$(target_deployment_folder)\\$(zip_file)","destinationFolder":"\\\\$(target_machinename)\\$(target_deployment_folder)\\for_deploy","cleanDestinationFolder":"false"}},{"taskId":"a8515ec8-7254-4ffd-912c-86772e2b5962","version":"3.*","name":"Replace tokens in Web.config","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"rootDirectory":"\\\\$(target_machinename)\\$(target_deployment_folder)\\for_deploy","targetFiles":"Web.config","encoding":"auto","writeBOM":"true","escapeType":"auto","escapeChar":"","charsToEscape":"","verbosity":"normal","actionOnMissing":"warn","keepToken":"false","tokenPrefix":"#{","tokenSuffix":"}#","useLegacyPattern":"false","emptyValue":"(empty)","variableFiles":"","variableSeparator":".","enableTelemetry":"true"}},{"taskId":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","version":"2.*","name":"Copy WebSite files to LIVE ","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"SourceFolder":"\\\\$(target_machinename)\\$(target_deployment_folder)\\for_deploy","Contents":"**","TargetFolder":"\\\\$(target_machinename)\\$(live_website_folder)","CleanTargetFolder":"true","OverWrite":"true","flattenFolders":"false"}}]}],"environmentOptions":{"emailNotificationType":"OnlyOnFailure","emailRecipients":"release.environment.owner;release.creator","skipArtifactsDownload":false,"timeoutInMinutes":0,"enableAccessToken":false,"publishDeploymentStatus":false},"demands":[],"conditions":[{"name":"Prod30-DSAdmin","conditionType":2,"value":"4"}],"executionPolicy":{"concurrencyCount":0,"queueDepthCount":0},"schedules":[],"retentionPolicy":{"daysToKeep":30,"releasesToKeep":3,"retainBuild":true}},{"id":73,"name":"Prod32-DSAdmin","rank":7,"owner":{"id":"aa6efae3-d562-4d41-ac28-eaa5dbcacad5","displayName":"Pittsley, Neil (US)","uniqueName":"NASA\\NPittsley","url":"http://teamfoundation.bcdtravel.com:8080/tfs/EnterpriseDevelopment/_apis/Identities/aa6efae3-d562-4d41-ac28-eaa5dbcacad5","imageUrl":"http://usgadtc0tfs01:8080/tfs/EnterpriseDevelopment/_api/_common/identityImage?id=aa6efae3-d562-4d41-ac28-eaa5dbcacad5"},"variables":{"target_machinename":{"value":"USCDC01PWWEB032"},"dashboardreporting_connection_string":{"value":"Data Source=DBP64CLU23SQLX2;Initial Catalog=DashboardReporting;Persist Security Info=True;User ID=DashboardReporting;Password=@Star7Seven;Application Name=DSAdmin"},"pretrip_connection_string":{"value":"Server=DBP64CLU23SQLX2;Database=PreTripDataMart;Uid=Reporting;Pwd=@Star7Seven;Application Name=DSAdmin"},"posttrip_connection_string":{"value":"Data Source=DBP64CLU23SQLX2;Initial Catalog=PostTripDM;Persist Security Info=True;User ID=Reporting;Password=@Star7Seven"},"intelliguide_connection_string":{"value":"Data Source=DBP64CLU23SQLX2;Initial Catalog=IntelliguideData;Persist Security Info=True;User ID=DashboardReporting;Password=@Star7Seven;Application Name=DSAdmin"},"bti_travelnet_connection_string":{"value":"Data Source=10.30.21.96,1997;Initial Catalog=BTITravelNet;UID=BTITravelNetUser;PWD=Travel;Application Name=DSAdmin"},"report_server_url":{"value":"http://usgadtc3ds07/reportserver/"},"ssrs_report_viewer_url":{"value":"http://usgadtc3ds07/reportserver/Pages/ReportViewer.aspx?"},"main_app_physical_path":{"value":"\\\\USGALNX0APP39.worldtravel.local\\D$\\DS"},"main_app_url":{"value":"http://usgalnx0app39/DS"}},"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":false,"isNotificationOn":false,"approver":{"id":"d5a70bb5-47f9-42ba-a6c5-5dd6fd714706","displayName":"Singh, Sundeep (IN)","uniqueName":"NASA\\ssingh1","url":"http://teamfoundation.bcdtravel.com:8080/tfs/EnterpriseDevelopment/_apis/Identities/d5a70bb5-47f9-42ba-a6c5-5dd6fd714706","imageUrl":"http://usgadtc0tfs01:8080/tfs/EnterpriseDevelopment/_api/_common/identityImage?id=d5a70bb5-47f9-42ba-a6c5-5dd6fd714706"},"id":286}],"approvalOptions":{"requiredApproverCount":0,"releaseCreatorCanBeApprover":true,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMintues":43200}},"deployStep":{"tasks":[],"id":289},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":292}]},"deployPhases":[{"deploymentInput":{"parallelExecution":{"parallelExecutionType":"none"},"skipArtifactsDownload":false,"timeoutInMinutes":0,"queueId":44,"demands":[],"enableAccessToken":false},"rank":1,"phaseType":1,"name":"Run on agent","workflowTasks":[{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"1.*","name":"PowerShell Set timestamp variable for folder naming","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"scriptType":"inlineScript","scriptName":"","arguments":"","inlineScript":"$date=$(Get-Date -UFormat \"%Y_%m_%d_%R\") | ForEach-Object{$_ -replace \":\",\"_\"}\nWrite-Host \"##vso[task.setvariable variable=timestamp]$date\"","workingFolder":"","failOnStandardError":"true"}},{"taskId":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","version":"2.*","name":"Backup Website","enabled":false,"alwaysRun":false,"continueOnError":true,"timeoutInMinutes":0,"definitionType":"task","inputs":{"SourceFolder":"\\\\$(target_machinename)\\$(live_website_folder)","Contents":"**\n!log4net/**\n!DSExportTemp/**","TargetFolder":"\\\\$(target_machinename)\\$(target_backup_folder)","CleanTargetFolder":"true","OverWrite":"true","flattenFolders":"false"}},{"taskId":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","version":"2.*","name":"Backup for Rollback","enabled":false,"alwaysRun":false,"continueOnError":true,"timeoutInMinutes":0,"definitionType":"task","inputs":{"SourceFolder":"\\\\$(target_machinename)\\$(live_website_folder)","Contents":"**","TargetFolder":"\\\\$(target_machinename)\\$(target_rollback_folder)","CleanTargetFolder":"true","OverWrite":"true","flattenFolders":"false"}},{"taskId":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","version":"2.*","name":"Copy from CentralDeploymentDirectory to Server Deployment Directory","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"SourceFolder":"\\\\$(source_deployment_server)\\$(source_deployment_path)","Contents":"$(zip_file)","TargetFolder":"\\\\$(target_machinename)\\$(target_deployment_folder)","CleanTargetFolder":"false","OverWrite":"true","flattenFolders":"false"}},{"taskId":"5e1e3830-fbfb-11e5-aab1-090c92bc4988","version":"1.*","name":"Extract files ","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"archiveFilePatterns":"\\\\$(target_machinename)\\$(target_deployment_folder)\\$(zip_file)","destinationFolder":"\\\\$(target_machinename)\\$(target_deployment_folder)\\for_deploy","cleanDestinationFolder":"false"}},{"taskId":"a8515ec8-7254-4ffd-912c-86772e2b5962","version":"3.*","name":"Replace tokens in Web.config","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"rootDirectory":"\\\\$(target_machinename)\\$(target_deployment_folder)\\for_deploy","targetFiles":"Web.config","encoding":"auto","writeBOM":"true","escapeType":"auto","escapeChar":"","charsToEscape":"","verbosity":"normal","actionOnMissing":"warn","keepToken":"false","tokenPrefix":"#{","tokenSuffix":"}#","useLegacyPattern":"false","emptyValue":"(empty)","variableFiles":"","variableSeparator":".","enableTelemetry":"true"}},{"taskId":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","version":"2.*","name":"Copy WebSite files to LIVE ","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"SourceFolder":"\\\\$(target_machinename)\\$(target_deployment_folder)\\for_deploy","Contents":"**","TargetFolder":"\\\\$(target_machinename)\\$(live_website_folder)","CleanTargetFolder":"true","OverWrite":"true","flattenFolders":"false"}}]}],"environmentOptions":{"emailNotificationType":"OnlyOnFailure","emailRecipients":"release.environment.owner;release.creator","skipArtifactsDownload":false,"timeoutInMinutes":0,"enableAccessToken":false,"publishDeploymentStatus":false},"demands":[],"conditions":[{"name":"Prod31-DSAdmin","conditionType":2,"value":"4"}],"executionPolicy":{"concurrencyCount":0,"queueDepthCount":0},"schedules":[],"retentionPolicy":{"daysToKeep":30,"releasesToKeep":3,"retainBuild":true}},{"id":74,"name":"Prod33-DSAdmin","rank":8,"owner":{"id":"aa6efae3-d562-4d41-ac28-eaa5dbcacad5","displayName":"Pittsley, Neil (US)","uniqueName":"NASA\\NPittsley","url":"http://teamfoundation.bcdtravel.com:8080/tfs/EnterpriseDevelopment/_apis/Identities/aa6efae3-d562-4d41-ac28-eaa5dbcacad5","imageUrl":"http://usgadtc0tfs01:8080/tfs/EnterpriseDevelopment/_api/_common/identityImage?id=aa6efae3-d562-4d41-ac28-eaa5dbcacad5"},"variables":{"target_machinename":{"value":"USCDC01PWWEB033"},"dashboardreporting_connection_string":{"value":"Data Source=DBP64CLU23SQLX2;Initial Catalog=DashboardReporting;Persist Security Info=True;User ID=DashboardReporting;Password=@Star7Seven;Application Name=DSAdmin"},"pretrip_connection_string":{"value":"Server=DBP64CLU23SQLX2;Database=PreTripDataMart;Uid=Reporting;Pwd=@Star7Seven;Application Name=DSAdmin"},"posttrip_connection_string":{"value":"Data Source=DBP64CLU23SQLX2;Initial Catalog=PostTripDM;Persist Security Info=True;User ID=Reporting;Password=@Star7Seven"},"intelliguide_connection_string":{"value":"Data Source=DBP64CLU23SQLX2;Initial Catalog=IntelliguideData;Persist Security Info=True;User ID=DashboardReporting;Password=@Star7Seven;Application Name=DSAdmin"},"bti_travelnet_connection_string":{"value":"Data Source=10.30.21.96,1997;Initial Catalog=BTITravelNet;UID=BTITravelNetUser;PWD=Travel;Application Name=DSAdmin"},"report_server_url":{"value":"http://usgadtc3ds07/reportserver/"},"ssrs_report_viewer_url":{"value":"http://usgadtc3ds07/reportserver/Pages/ReportViewer.aspx?"},"main_app_physical_path":{"value":"\\\\USGALNX0APP39.worldtravel.local\\D$\\DS"},"main_app_url":{"value":"http://usgalnx0app39/DS"}},"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":false,"isNotificationOn":true,"approver":{"id":"d5a70bb5-47f9-42ba-a6c5-5dd6fd714706","displayName":"Singh, Sundeep (IN)","uniqueName":"NASA\\ssingh1","url":"http://teamfoundation.bcdtravel.com:8080/tfs/EnterpriseDevelopment/_apis/Identities/d5a70bb5-47f9-42ba-a6c5-5dd6fd714706","imageUrl":"http://usgadtc0tfs01:8080/tfs/EnterpriseDevelopment/_api/_common/identityImage?id=d5a70bb5-47f9-42ba-a6c5-5dd6fd714706"},"id":287}],"approvalOptions":{"requiredApproverCount":0,"releaseCreatorCanBeApprover":true,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMintues":43200}},"deployStep":{"tasks":[],"id":288},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":293}]},"deployPhases":[{"deploymentInput":{"parallelExecution":{"parallelExecutionType":"none"},"skipArtifactsDownload":false,"timeoutInMinutes":0,"queueId":44,"demands":[],"enableAccessToken":false},"rank":1,"phaseType":1,"name":"Run on agent","workflowTasks":[{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"1.*","name":"PowerShell Set timestamp variable for folder naming","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"scriptType":"inlineScript","scriptName":"","arguments":"","inlineScript":"$date=$(Get-Date -UFormat \"%Y_%m_%d_%R\") | ForEach-Object{$_ -replace \":\",\"_\"}\nWrite-Host \"##vso[task.setvariable variable=timestamp]$date\"","workingFolder":"","failOnStandardError":"true"}},{"taskId":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","version":"2.*","name":"Backup Website","enabled":false,"alwaysRun":false,"continueOnError":true,"timeoutInMinutes":0,"definitionType":"task","inputs":{"SourceFolder":"\\\\$(target_machinename)\\$(live_website_folder)","Contents":"**\n!log4net/**\n!DSExportTemp/**","TargetFolder":"\\\\$(target_machinename)\\$(target_backup_folder)","CleanTargetFolder":"true","OverWrite":"true","flattenFolders":"false"}},{"taskId":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","version":"2.*","name":"Backup for Rollback","enabled":false,"alwaysRun":false,"continueOnError":true,"timeoutInMinutes":0,"definitionType":"task","inputs":{"SourceFolder":"\\\\$(target_machinename)\\$(live_website_folder)","Contents":"**","TargetFolder":"\\\\$(target_machinename)\\$(target_rollback_folder)","CleanTargetFolder":"true","OverWrite":"true","flattenFolders":"false"}},{"taskId":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","version":"2.*","name":"Copy from CentralDeploymentDirectory to Server Deployment Directory","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"SourceFolder":"\\\\$(source_deployment_server)\\$(source_deployment_path)","Contents":"$(zip_file)","TargetFolder":"\\\\$(target_machinename)\\$(target_deployment_folder)","CleanTargetFolder":"false","OverWrite":"true","flattenFolders":"false"}},{"taskId":"5e1e3830-fbfb-11e5-aab1-090c92bc4988","version":"1.*","name":"Extract files ","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"archiveFilePatterns":"\\\\$(target_machinename)\\$(target_deployment_folder)\\$(zip_file)","destinationFolder":"\\\\$(target_machinename)\\$(target_deployment_folder)\\for_deploy","cleanDestinationFolder":"false"}},{"taskId":"a8515ec8-7254-4ffd-912c-86772e2b5962","version":"3.*","name":"Replace tokens in Web.config","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"rootDirectory":"\\\\$(target_machinename)\\$(target_deployment_folder)\\for_deploy","targetFiles":"Web.config","encoding":"auto","writeBOM":"true","escapeType":"auto","escapeChar":"","charsToEscape":"","verbosity":"normal","actionOnMissing":"warn","keepToken":"false","tokenPrefix":"#{","tokenSuffix":"}#","useLegacyPattern":"false","emptyValue":"(empty)","variableFiles":"","variableSeparator":".","enableTelemetry":"true"}},{"taskId":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","version":"2.*","name":"Copy WebSite files to LIVE ","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"SourceFolder":"\\\\$(target_machinename)\\$(target_deployment_folder)\\for_deploy","Contents":"**","TargetFolder":"\\\\$(target_machinename)\\$(live_website_folder)","CleanTargetFolder":"true","OverWrite":"true","flattenFolders":"false"}}]}],"environmentOptions":{"emailNotificationType":"OnlyOnFailure","emailRecipients":"release.environment.owner;release.creator","skipArtifactsDownload":false,"timeoutInMinutes":0,"enableAccessToken":false,"publishDeploymentStatus":false},"demands":[],"conditions":[{"name":"Prod32-DSAdmin","conditionType":2,"value":"4"}],"executionPolicy":{"concurrencyCount":0,"queueDepthCount":0},"schedules":[],"retentionPolicy":{"daysToKeep":30,"releasesToKeep":3,"retainBuild":true}}],"artifacts":[{"sourceId":"da5251f5-3c5d-4f39-b901-a03fb6aea608:46","type":"Build","alias":"DSAdmin_Package","definitionReference":{"artifactSourceDefinitionUrl":{"id":"http://usgadtc0tfs01:8080/tfs/_permalink/_build/index?collectionId=fefc5b29-2dc4-499d-9ee3-90cae31e2cc8&projectId=da5251f5-3c5d-4f39-b901-a03fb6aea608&definitionId=46","name":""},"defaultVersionBranch":{"id":"","name":""},"defaultVersionSpecific":{"id":"","name":""},"defaultVersionTags":{"id":"","name":""},"defaultVersionType":{"id":"latestType","name":"Latest"},"definition":{"id":"46","name":"DSAdmin_Package"},"project":{"id":"da5251f5-3c5d-4f39-b901-a03fb6aea608","name":"DecisionSource"}},"isPrimary":true}],"triggers":[],"releaseNameFormat":"Release-$(Build.BuildNumber)-$(rev:r)","url":"http://usgadtc0tfs01:8080/tfs/EnterpriseDevelopment/da5251f5-3c5d-4f39-b901-a03fb6aea608/_apis/Release/definitions/12","_links":{"self":{"href":"http://usgadtc0tfs01:8080/tfs/EnterpriseDevelopment/da5251f5-3c5d-4f39-b901-a03fb6aea608/_apis/Release/definitions/12"},"web":{"href":"http://usgadtc0tfs01:8080/tfs/EnterpriseDevelopment/da5251f5-3c5d-4f39-b901-a03fb6aea608/_release?definitionId=12"}},"tags":[],"properties":{}}