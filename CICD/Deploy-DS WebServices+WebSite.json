{"source":2,"id":8,"revision":306,"name":"Deploy-DS WebServices+WebSite","description":null,"createdBy":{"id":"8867bd82-d7a8-4d9c-9599-5e75c506e524","displayName":"Gopal, Vidya (US)","uniqueName":"NASA\\vgopal","url":"http://teamfoundation.bcdtravel.com:8080/tfs/EnterpriseDevelopment/_apis/Identities/8867bd82-d7a8-4d9c-9599-5e75c506e524","imageUrl":"http://usgadtc0tfs01:8080/tfs/EnterpriseDevelopment/_api/_common/identityImage?id=8867bd82-d7a8-4d9c-9599-5e75c506e524"},"createdOn":"2019-02-25T23:22:29.110Z","modifiedBy":{"id":"aa6efae3-d562-4d41-ac28-eaa5dbcacad5","displayName":"Pittsley, Neil (US)","uniqueName":"NASA\\NPittsley","url":"http://teamfoundation.bcdtravel.com:8080/tfs/EnterpriseDevelopment/_apis/Identities/aa6efae3-d562-4d41-ac28-eaa5dbcacad5","imageUrl":"http://usgadtc0tfs01:8080/tfs/EnterpriseDevelopment/_api/_common/identityImage?id=aa6efae3-d562-4d41-ac28-eaa5dbcacad5"},"modifiedOn":"2020-06-19T18:45:20.923Z","lastRelease":null,"path":"\\","variables":{"source_deployment_server":{"value":"USGADTC0TFS05"},"source_deployment_path":{"value":"deploy\\DecisionSource\\UIandScheduler"},"sql_package_exe_path":{"value":"c:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Professional\\Common7\\IDE\\Extensions\\Microsoft\\SQLDB\\DAC\\130"},"dacpac_path_dashboard_reporting":{"value":"d$\\Deployment\\$(timestamp)\\DecisionSource\\Databases\\DecisionSource.SSDT.DashboardReporting.dacpac"},"timestamp":{"value":"from_script"},"zip_file":{"value":"$(Build.BuildNumber).zip"},"output_path":{"value":"$(Build.ArtifactStagingDirectory)"},"target_websites_backup_folder":{"value":"d$\\Backup\\$(timestamp)\\DecisionSource\\Websites"},"target_webservices_backup_folder":{"value":"d$\\Backup\\$(timestamp)\\DecisionSource\\WebServices"},"target_websites_rollback_folder":{"value":"d$\\Backup\\Rollback\\DecisionSource\\Websites"},"target_webservices_rollback_folder":{"value":"d$\\Backup\\Rollback\\DecisionSource\\WebServices"},"target_websites_deployment_folder":{"value":"d$\\Deployment\\$(timestamp)\\DecisionSource\\Websites"},"target_webservices_deployment_folder":{"value":"d$\\Deployment\\$(timestamp)\\DecisionSource\\WebServices"},"live_websites_folder":{"value":"d$\\Domains\\DecisionSource\\WebSites"},"live_webservices_folder":{"value":"d$\\Domains\\DecisionSource\\WebServices"},"db_admin_connection_string":{"value":"Server=DSDEVSQL01;Initial Catalog=DashboardReporting; User Id=DashboardReporting; Password=Syster7Seven;"},"target_deployment_folder":{"value":"d$\\Deployment\\$(timestamp)\\DecisionSource"},"ds_base_url":{"value":"/"},"api_server_decisionsource":{"value":"/DecisionSourceApi/DecisionSource"},"api_server_pretrip":{"value":"/DecisionSourceApi/pretrip"},"api_server_posttrip":{"value":"/DecisionSourceApi/posttrip"},"api_server_intelliguide":{"value":"/DecisionSourceApi/Intelliguide"},"auth_exp_minutes":{"value":"30"},"report_server_url":{"value":"http://USGADTC4SSRS01/ReportServer"},"auth_passphrase":{"value":"3f16e626-d00b-48aa-996a-48cd8c3bd12e"},"alert_email_subject":{"value":"Travel notice"},"alert_email_from":{"value":"TravelerNotice@security.tripsource.com"},"phrase":{"value":"RrAdMER4l8db8u9rlgqv3P4lR1ScMtwgTWFxbuAUcXc="},"target_web_backup_folder":{"value":"d$\\Backup\\$(timestamp)\\DecisionSource\\Web"},"target_web_rollback_folder":{"value":"d$\\Backup\\Rollback\\DecisionSource\\Web"},"target_web_deployment_folder":{"value":"d$\\Deployment\\$(timestamp)\\DecisionSource\\Web"},"live_web_folder":{"value":"d$\\Domains\\DecisionSource\\Web"}},"variableGroups":[],"environments":[{"id":14,"name":"DEV-DSUI","rank":1,"owner":{"id":"aa6efae3-d562-4d41-ac28-eaa5dbcacad5","displayName":"Pittsley, Neil (US)","uniqueName":"NASA\\NPittsley","url":"http://teamfoundation.bcdtravel.com:8080/tfs/EnterpriseDevelopment/_apis/Identities/aa6efae3-d562-4d41-ac28-eaa5dbcacad5","imageUrl":"http://usgadtc0tfs01:8080/tfs/EnterpriseDevelopment/_api/_common/identityImage?id=aa6efae3-d562-4d41-ac28-eaa5dbcacad5"},"variables":{"target_machinename":{"value":"uscdc01dwapp007"},"dashboardreporting_connection_string":{"value":"metadata=res://*/DashboardReportingModel.csdl|res://*/DashboardReportingModel.ssdl|res://*/DashboardReportingModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=DSDEVSQL01;initial catalog=DashboardReporting;persist security info=True;user id=DashboardReporting;password=Syster7Seven;MultipleActiveResultSets=True;App=EntityFramework&quot;"},"pretrip_connection_string":{"value":"metadata=res://*/PreTripDataMartModel.csdl|res://*/PreTripDataMartModel.ssdl|res://*/PreTripDataMartModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=DSDEVSQL01;initial catalog=PreTripDataMart;user id=DashboardReporting;password=Syster7Seven;MultipleActiveResultSets=True;App=EntityFramework&quot;"},"posttrip_connection_string":{"value":"metadata=res://*/PostTripDataModel.csdl|res://*/PostTripDataModel.ssdl|res://*/PostTripDataModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=DSDEVSQL01;initial catalog=PostTripDM;persist security info=True;user id=DashboardReporting;password=Syster7Seven;MultipleActiveResultSets=True;App=EntityFramework&quot;"},"intelliguide_connection_string":{"value":"metadata=res://*/IntelliguideDataModel.csdl|res://*/IntelliguideDataModel.ssdl|res://*/IntelliguideDataModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=DSDEVSQL01;initial catalog=IntelliguideData;persist security info=True;user id=DashboardReporting;password=Syster7Seven;MultipleActiveResultSets=True;App=EntityFramework&quot;"},"msmq_address":{"value":".\\private$\\sms_processing"}},"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":148}]},"deployStep":{"tasks":[],"id":44},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":false,"isNotificationOn":false,"approver":{"id":"aa6efae3-d562-4d41-ac28-eaa5dbcacad5","displayName":"Pittsley, Neil (US)","uniqueName":"NASA\\NPittsley","url":"http://teamfoundation.bcdtravel.com:8080/tfs/EnterpriseDevelopment/_apis/Identities/aa6efae3-d562-4d41-ac28-eaa5dbcacad5","imageUrl":"http://usgadtc0tfs01:8080/tfs/EnterpriseDevelopment/_api/_common/identityImage?id=aa6efae3-d562-4d41-ac28-eaa5dbcacad5"},"id":218},{"rank":1,"isAutomated":false,"isNotificationOn":false,"approver":{"id":"63e68b1f-ca8a-4d86-9536-f6424f2e8fe5","displayName":"Wu, Wenyi (US)","uniqueName":"NASA\\wwu01","url":"http://teamfoundation.bcdtravel.com:8080/tfs/EnterpriseDevelopment/_apis/Identities/63e68b1f-ca8a-4d86-9536-f6424f2e8fe5","imageUrl":"http://usgadtc0tfs01:8080/tfs/EnterpriseDevelopment/_api/_common/identityImage?id=63e68b1f-ca8a-4d86-9536-f6424f2e8fe5"},"id":219}],"approvalOptions":{"requiredApproverCount":1,"releaseCreatorCanBeApprover":true,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMintues":43200}},"deployPhases":[{"deploymentInput":{"parallelExecution":{"parallelExecutionType":"none"},"skipArtifactsDownload":false,"timeoutInMinutes":0,"queueId":44,"demands":[],"enableAccessToken":false},"rank":1,"phaseType":1,"name":"Run on agent","workflowTasks":[{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"1.*","name":"PowerShell Script Set timestamp variable for folder naming","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"scriptType":"inlineScript","scriptName":"","arguments":"","inlineScript":"$date=$(Get-Date -UFormat \"%Y_%m_%d_%R\") | ForEach-Object{$_ -replace \":\",\"_\"}\nWrite-Host \"##vso[task.setvariable variable=timestamp]$date\"","workingFolder":"","failOnStandardError":"true"}},{"taskId":"d9bafed4-0b18-4f58-968d-86655b4d2ce9","version":"1.*","name":"Deploy Database","enabled":false,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"filename":"$(sql_package_exe_path)","arguments":"/action:publish /sourceFile:\"$(dacpac_path_dashboard_reporting)\" /targetconnectionstring:\"$(db_admin_connection_string)\" /p:\"DropObjectsNotInSource=False\"  /p: “ExcludeObjectTypes=Logins”  /p: “BlockWhenDriftDetected=False”","workingFolder":"","failOnStandardError":"false"}},{"taskId":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","version":"2.*","name":"Copy from CentralDeploymentDirectory to Server Deployment Directory","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"SourceFolder":"\\\\$(source_deployment_server)\\$(source_deployment_path)","Contents":"$(zip_file)","TargetFolder":"\\\\$(target_machinename)\\$(target_deployment_folder)","CleanTargetFolder":"false","OverWrite":"true","flattenFolders":"false"}},{"taskId":"5e1e3830-fbfb-11e5-aab1-090c92bc4988","version":"1.*","name":"Extract files ","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"archiveFilePatterns":"\\\\$(target_machinename)\\$(target_deployment_folder)\\$(zip_file)","destinationFolder":"\\\\$(target_machinename)\\$(target_deployment_folder)\\for_deploy","cleanDestinationFolder":"true"}},{"taskId":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","version":"2.*","name":"Copy ITSEC to Edit","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"SourceFolder":"\\\\$(target_machinename)\\$(live_web_folder)","Contents":"itsec.txt","TargetFolder":"\\\\$(target_machinename)\\$(target_deployment_folder)\\for_deploy","CleanTargetFolder":"false","OverWrite":"true","flattenFolders":"false"}},{"taskId":"a8515ec8-7254-4ffd-912c-86772e2b5962","version":"3.*","name":"Replace tokens in itsec.txt","enabled":false,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"rootDirectory":"\\\\$(target_machinename)\\$(target_deployment_folder)\\for_deploy","targetFiles":"itsec.txt","encoding":"auto","writeBOM":"true","escapeType":"auto","escapeChar":"","charsToEscape":"","verbosity":"normal","actionOnMissing":"warn","keepToken":"false","tokenPrefix":"#{","tokenSuffix":"}#","useLegacyPattern":"false","emptyValue":"(empty)","variableFiles":"","variableSeparator":".","enableTelemetry":"true"}},{"taskId":"a8515ec8-7254-4ffd-912c-86772e2b5962","version":"3.*","name":"Replace tokens in ALL  **/*.config","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"rootDirectory":"\\\\$(target_machinename)\\$(target_deployment_folder)\\for_deploy","targetFiles":"**/*.config","encoding":"auto","writeBOM":"true","escapeType":"auto","escapeChar":"","charsToEscape":"","verbosity":"normal","actionOnMissing":"warn","keepToken":"false","tokenPrefix":"#{","tokenSuffix":"}#","useLegacyPattern":"false","emptyValue":"(empty)","variableFiles":"","variableSeparator":".","enableTelemetry":"true"}},{"taskId":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","version":"2.*","name":"Copy Web Sites and Services files to LIVE","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"SourceFolder":"\\\\$(target_machinename)\\$(target_deployment_folder)\\for_deploy","Contents":"**","TargetFolder":"\\\\$(target_machinename)\\$(live_web_folder)","CleanTargetFolder":"false","OverWrite":"true","flattenFolders":"false"}},{"taskId":"ef087383-ee5e-42c7-9a53-ab56c98420f9","version":"2.*","name":"VsTest - testAssemblies","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"testSelector":"testAssemblies","testAssemblyVer2":"**\\*test*.dll\n!**\\obj\\**","testPlan":"","testSuite":"","testConfiguration":"","tcmTestRun":"$(test.RunId)","searchFolder":"$(System.DefaultWorkingDirectory)","testFiltercriteria":"","runOnlyImpactedTests":"false","runAllTestsAfterXBuilds":"50","uiTests":"false","vstestLocationMethod":"version","vsTestVersion":"latest","vstestLocation":"","runSettingsFile":"","overrideTestrunParameters":"","runInParallel":"false","runTestsInIsolation":"false","pathtoCustomTestAdapters":"","codeCoverageEnabled":"false","otherConsoleOptions":"","testRunTitle":"","platform":"","configuration":"","publishRunAttachments":"true"}}]}],"environmentOptions":{"emailNotificationType":"OnlyOnFailure","emailRecipients":"release.environment.owner;release.creator","skipArtifactsDownload":false,"timeoutInMinutes":0,"enableAccessToken":false,"publishDeploymentStatus":false},"demands":[],"conditions":[{"name":"ReleaseStarted","conditionType":1,"value":""}],"executionPolicy":{"concurrencyCount":0,"queueDepthCount":0},"schedules":[],"retentionPolicy":{"daysToKeep":30,"releasesToKeep":3,"retainBuild":true}},{"id":52,"name":"QA-DSUI","rank":2,"owner":{"id":"aa6efae3-d562-4d41-ac28-eaa5dbcacad5","displayName":"Pittsley, Neil (US)","uniqueName":"NASA\\NPittsley","url":"http://teamfoundation.bcdtravel.com:8080/tfs/EnterpriseDevelopment/_apis/Identities/aa6efae3-d562-4d41-ac28-eaa5dbcacad5","imageUrl":"http://usgadtc0tfs01:8080/tfs/EnterpriseDevelopment/_api/_common/identityImage?id=aa6efae3-d562-4d41-ac28-eaa5dbcacad5"},"variables":{"target_machinename":{"value":"uscdc01dwweb024"},"dashboardreporting_connection_string":{"value":"metadata=res://*/DashboardReportingModel.csdl|res://*/DashboardReportingModel.ssdl|res://*/DashboardReportingModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=DSQAFSQL01;initial catalog=DashboardReporting;persist security info=True;user id=DashboardReporting;password=@ins57Seven;MultipleActiveResultSets=True;App=EntityFramework&quot;"},"pretrip_connection_string":{"value":"metadata=res://*/PreTripDataMartModel.csdl|res://*/PreTripDataMartModel.ssdl|res://*/PreTripDataMartModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=DSQAFSQL01;initial catalog=PreTripDataMart;user id=Reporting;password=@ins57Seven;MultipleActiveResultSets=True;App=EntityFramework&quot;"},"posttrip_connection_string":{"value":"metadata=res://*/PostTripDataModel.csdl|res://*/PostTripDataModel.ssdl|res://*/PostTripDataModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=DSQAFSQL01;initial catalog=PostTripDM;persist security info=True;user id=Reporting;password=@ins57Seven;MultipleActiveResultSets=True;App=EntityFramework&quot;"},"intelliguide_connection_string":{"value":"metadata=res://*/IntelliguideDataModel.csdl|res://*/IntelliguideDataModel.ssdl|res://*/IntelliguideDataModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=DSQAFSQL01;initial catalog=IntelliguideData;persist security info=True;user id=DashboardReporting;password=@ins57Seven;MultipleActiveResultSets=True;App=EntityFramework&quot;"},"msmq_address":{"value":"FormatName:DIRECT=OS:USCDC01DWAPP017\\private$\\sms_processing_nontrans"}},"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":false,"isNotificationOn":true,"approver":{"id":"23b6a59f-9499-44e4-a635-315712614487","displayName":"Cleland, Deanna (US)","uniqueName":"NASA\\dcleland","url":"http://teamfoundation.bcdtravel.com:8080/tfs/EnterpriseDevelopment/_apis/Identities/23b6a59f-9499-44e4-a635-315712614487","imageUrl":"http://usgadtc0tfs01:8080/tfs/EnterpriseDevelopment/_api/_common/identityImage?id=23b6a59f-9499-44e4-a635-315712614487"},"id":224}],"approvalOptions":{"requiredApproverCount":0,"releaseCreatorCanBeApprover":true,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMintues":43200}},"deployStep":{"tasks":[],"id":221},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":false,"isNotificationOn":true,"approver":{"id":"23b6a59f-9499-44e4-a635-315712614487","displayName":"Cleland, Deanna (US)","uniqueName":"NASA\\dcleland","url":"http://teamfoundation.bcdtravel.com:8080/tfs/EnterpriseDevelopment/_apis/Identities/23b6a59f-9499-44e4-a635-315712614487","imageUrl":"http://usgadtc0tfs01:8080/tfs/EnterpriseDevelopment/_api/_common/identityImage?id=23b6a59f-9499-44e4-a635-315712614487"},"id":230}],"approvalOptions":{"requiredApproverCount":1,"releaseCreatorCanBeApprover":true,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMintues":43200}},"deployPhases":[{"deploymentInput":{"parallelExecution":{"parallelExecutionType":"none"},"skipArtifactsDownload":false,"timeoutInMinutes":0,"queueId":44,"demands":[],"enableAccessToken":false},"rank":1,"phaseType":1,"name":"Run on agent","workflowTasks":[{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"1.*","name":"PowerShell Script Set timestamp variable for folder naming","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"scriptType":"inlineScript","scriptName":"","arguments":"","inlineScript":"$date=$(Get-Date -UFormat \"%Y_%m_%d_%R\") | ForEach-Object{$_ -replace \":\",\"_\"}\nWrite-Host \"##vso[task.setvariable variable=timestamp]$date\"","workingFolder":"","failOnStandardError":"true"}},{"taskId":"d9bafed4-0b18-4f58-968d-86655b4d2ce9","version":"1.*","name":"Deploy Database","enabled":false,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"filename":"$(sql_package_exe_path)","arguments":"/action:publish /sourceFile:\"$(dacpac_path)\" /targetconnectionstring:\"$(db_admin_connection_string)\"","workingFolder":"","failOnStandardError":"false"}},{"taskId":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","version":"2.*","name":"Copy from CentralDeploymentDirectory to Server Deployment Directory","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"SourceFolder":"\\\\$(source_deployment_server)\\$(source_deployment_path)","Contents":"$(zip_file)","TargetFolder":"\\\\$(target_machinename)\\$(target_deployment_folder)","CleanTargetFolder":"false","OverWrite":"true","flattenFolders":"false"}},{"taskId":"5e1e3830-fbfb-11e5-aab1-090c92bc4988","version":"1.*","name":"Extract files ","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"archiveFilePatterns":"\\\\$(target_machinename)\\$(target_deployment_folder)\\$(zip_file)","destinationFolder":"\\\\$(target_machinename)\\$(target_deployment_folder)\\for_deploy","cleanDestinationFolder":"true"}},{"taskId":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","version":"2.*","name":"Copy ITSEC to Edit","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"SourceFolder":"\\\\$(target_machinename)\\$(live_web_folder)","Contents":"itsec.txt","TargetFolder":"\\\\$(target_machinename)\\$(target_deployment_folder)\\for_deploy","CleanTargetFolder":"false","OverWrite":"true","flattenFolders":"false"}},{"taskId":"a8515ec8-7254-4ffd-912c-86772e2b5962","version":"3.*","name":"Replace tokens in itsec.txt","enabled":false,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"rootDirectory":"\\\\$(target_machinename)\\$(target_deployment_folder)\\for_deploy","targetFiles":"itsec.txt","encoding":"auto","writeBOM":"true","escapeType":"auto","escapeChar":"","charsToEscape":"","verbosity":"normal","actionOnMissing":"warn","keepToken":"false","tokenPrefix":"#{","tokenSuffix":"}#","useLegacyPattern":"false","emptyValue":"(empty)","variableFiles":"","variableSeparator":".","enableTelemetry":"true"}},{"taskId":"a8515ec8-7254-4ffd-912c-86772e2b5962","version":"3.*","name":"Replace tokens in ALL  **/*.config","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"rootDirectory":"\\\\$(target_machinename)\\$(target_deployment_folder)\\for_deploy","targetFiles":"**/*.config","encoding":"auto","writeBOM":"true","escapeType":"auto","escapeChar":"","charsToEscape":"","verbosity":"normal","actionOnMissing":"warn","keepToken":"false","tokenPrefix":"#{","tokenSuffix":"}#","useLegacyPattern":"false","emptyValue":"(empty)","variableFiles":"","variableSeparator":".","enableTelemetry":"true"}},{"taskId":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","version":"2.*","name":"Copy Web Sites and Services files to LIVE","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"SourceFolder":"\\\\$(target_machinename)\\$(target_deployment_folder)\\for_deploy","Contents":"**","TargetFolder":"\\\\$(target_machinename)\\$(live_web_folder)","CleanTargetFolder":"false","OverWrite":"true","flattenFolders":"false"}},{"taskId":"ef087383-ee5e-42c7-9a53-ab56c98420f9","version":"2.*","name":"VsTest - testAssemblies","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"testSelector":"testAssemblies","testAssemblyVer2":"**\\*test*.dll\n!**\\obj\\**","testPlan":"","testSuite":"","testConfiguration":"","tcmTestRun":"$(test.RunId)","searchFolder":"$(System.DefaultWorkingDirectory)","testFiltercriteria":"","runOnlyImpactedTests":"false","runAllTestsAfterXBuilds":"50","uiTests":"false","vstestLocationMethod":"version","vsTestVersion":"latest","vstestLocation":"","runSettingsFile":"","overrideTestrunParameters":"","runInParallel":"false","runTestsInIsolation":"false","pathtoCustomTestAdapters":"","codeCoverageEnabled":"false","otherConsoleOptions":"","testRunTitle":"","platform":"","configuration":"","publishRunAttachments":"true"}}]}],"environmentOptions":{"emailNotificationType":"OnlyOnFailure","emailRecipients":"release.environment.owner;release.creator","skipArtifactsDownload":false,"timeoutInMinutes":0,"enableAccessToken":false,"publishDeploymentStatus":false},"demands":[],"conditions":[{"name":"DEV-DSUI","conditionType":2,"value":"4"}],"executionPolicy":{"concurrencyCount":0,"queueDepthCount":0},"schedules":[],"retentionPolicy":{"daysToKeep":30,"releasesToKeep":3,"retainBuild":true}},{"id":53,"name":"UAT14-DSUI","rank":3,"owner":{"id":"aa6efae3-d562-4d41-ac28-eaa5dbcacad5","displayName":"Pittsley, Neil (US)","uniqueName":"NASA\\NPittsley","url":"http://teamfoundation.bcdtravel.com:8080/tfs/EnterpriseDevelopment/_apis/Identities/aa6efae3-d562-4d41-ac28-eaa5dbcacad5","imageUrl":"http://usgadtc0tfs01:8080/tfs/EnterpriseDevelopment/_api/_common/identityImage?id=aa6efae3-d562-4d41-ac28-eaa5dbcacad5"},"variables":{"target_machinename":{"value":"uscdc01dwweb014"},"dashboardreporting_connection_string":{"value":"metadata=res://*/DashboardReportingModel.csdl|res://*/DashboardReportingModel.ssdl|res://*/DashboardReportingModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=DSUAFSQL01;initial catalog=DashboardReporting;persist security info=True;user id=DashboardReporting;password=@ins67Seven;MultipleActiveResultSets=True;App=EntityFramework&quot;"},"pretrip_connection_string":{"value":"metadata=res://*/PreTripDataMartModel.csdl|res://*/PreTripDataMartModel.ssdl|res://*/PreTripDataMartModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=DSUAFSQL01;initial catalog=PreTripDataMart;user id=Reporting;password=@ins67Seven;MultipleActiveResultSets=True;App=EntityFramework&quot;"},"posttrip_connection_string":{"value":"metadata=res://*/PostTripDataModel.csdl|res://*/PostTripDataModel.ssdl|res://*/PostTripDataModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=DSUAFSQL01;initial catalog=PostTripDM;persist security info=True;user id=Reporting;password=@ins67Seven;MultipleActiveResultSets=True;App=EntityFramework&quot;"},"intelliguide_connection_string":{"value":"metadata=res://*/IntelliguideDataModel.csdl|res://*/IntelliguideDataModel.ssdl|res://*/IntelliguideDataModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=DSUAFSQL01;initial catalog=IntelliguideData;persist security info=True;user id=DashboardReporting;password=@ins67Seven;MultipleActiveResultSets=True;App=EntityFramework&quot;"},"msmq_address":{"value":"FormatName:DIRECT=OS:USCDC01DWAPP018\\private$\\sms_processing_nontrans"}},"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":false,"isNotificationOn":true,"approver":{"id":"57e02079-2f68-40ac-9401-8881a0a3efa5","displayName":"Quicksell, Yvonne (US)","uniqueName":"NASA\\yquickse","url":"http://teamfoundation.bcdtravel.com:8080/tfs/EnterpriseDevelopment/_apis/Identities/57e02079-2f68-40ac-9401-8881a0a3efa5","imageUrl":"http://usgadtc0tfs01:8080/tfs/EnterpriseDevelopment/_api/_common/identityImage?id=57e02079-2f68-40ac-9401-8881a0a3efa5"},"id":225}],"approvalOptions":{"requiredApproverCount":0,"releaseCreatorCanBeApprover":true,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMintues":43200}},"deployStep":{"tasks":[],"id":228},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":false,"isNotificationOn":true,"approver":{"id":"57e02079-2f68-40ac-9401-8881a0a3efa5","displayName":"Quicksell, Yvonne (US)","uniqueName":"NASA\\yquickse","url":"http://teamfoundation.bcdtravel.com:8080/tfs/EnterpriseDevelopment/_apis/Identities/57e02079-2f68-40ac-9401-8881a0a3efa5","imageUrl":"http://usgadtc0tfs01:8080/tfs/EnterpriseDevelopment/_api/_common/identityImage?id=57e02079-2f68-40ac-9401-8881a0a3efa5"},"id":229}],"approvalOptions":{"requiredApproverCount":1,"releaseCreatorCanBeApprover":true,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMintues":43200}},"deployPhases":[{"deploymentInput":{"parallelExecution":{"parallelExecutionType":"none"},"skipArtifactsDownload":false,"timeoutInMinutes":0,"queueId":44,"demands":[],"enableAccessToken":false},"rank":1,"phaseType":1,"name":"Run on agent","workflowTasks":[{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"1.*","name":"PowerShell Script Set timestamp variable for folder naming","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"scriptType":"inlineScript","scriptName":"","arguments":"","inlineScript":"$date=$(Get-Date -UFormat \"%Y_%m_%d_%R\") | ForEach-Object{$_ -replace \":\",\"_\"}\nWrite-Host \"##vso[task.setvariable variable=timestamp]$date\"","workingFolder":"","failOnStandardError":"true"}},{"taskId":"d9bafed4-0b18-4f58-968d-86655b4d2ce9","version":"1.*","name":"Deploy Database","enabled":false,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"filename":"$(sql_package_exe_path)","arguments":"/action:publish /sourceFile:\"$(dacpac_path)\" /targetconnectionstring:\"$(db_admin_connection_string)\"","workingFolder":"","failOnStandardError":"false"}},{"taskId":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","version":"2.*","name":"Copy from CentralDeploymentDirectory to Server Deployment Directory","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"SourceFolder":"\\\\$(source_deployment_server)\\$(source_deployment_path)","Contents":"$(zip_file)","TargetFolder":"\\\\$(target_machinename)\\$(target_deployment_folder)","CleanTargetFolder":"false","OverWrite":"true","flattenFolders":"false"}},{"taskId":"5e1e3830-fbfb-11e5-aab1-090c92bc4988","version":"1.*","name":"Extract files ","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"archiveFilePatterns":"\\\\$(target_machinename)\\$(target_deployment_folder)\\$(zip_file)","destinationFolder":"\\\\$(target_machinename)\\$(target_deployment_folder)\\for_deploy","cleanDestinationFolder":"true"}},{"taskId":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","version":"2.*","name":"Copy ITSEC to Edit","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"SourceFolder":"\\\\$(target_machinename)\\$(live_web_folder)","Contents":"itsec.txt","TargetFolder":"\\\\$(target_machinename)\\$(target_deployment_folder)\\for_deploy","CleanTargetFolder":"false","OverWrite":"true","flattenFolders":"false"}},{"taskId":"a8515ec8-7254-4ffd-912c-86772e2b5962","version":"3.*","name":"Replace tokens in itsec.txt","enabled":false,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"rootDirectory":"\\\\$(target_machinename)\\$(target_deployment_folder)\\for_deploy","targetFiles":"itsec.txt","encoding":"auto","writeBOM":"true","escapeType":"auto","escapeChar":"","charsToEscape":"","verbosity":"normal","actionOnMissing":"warn","keepToken":"false","tokenPrefix":"#{","tokenSuffix":"}#","useLegacyPattern":"false","emptyValue":"(empty)","variableFiles":"","variableSeparator":".","enableTelemetry":"true"}},{"taskId":"a8515ec8-7254-4ffd-912c-86772e2b5962","version":"3.*","name":"Replace tokens in ALL  **/*.config","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"rootDirectory":"\\\\$(target_machinename)\\$(target_deployment_folder)\\for_deploy","targetFiles":"**/*.config","encoding":"auto","writeBOM":"true","escapeType":"auto","escapeChar":"","charsToEscape":"","verbosity":"normal","actionOnMissing":"warn","keepToken":"false","tokenPrefix":"#{","tokenSuffix":"}#","useLegacyPattern":"false","emptyValue":"(empty)","variableFiles":"","variableSeparator":".","enableTelemetry":"true"}},{"taskId":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","version":"2.*","name":"Copy Web Sites and Services files to LIVE","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"SourceFolder":"\\\\$(target_machinename)\\$(target_deployment_folder)\\for_deploy","Contents":"**","TargetFolder":"\\\\$(target_machinename)\\$(live_web_folder)","CleanTargetFolder":"false","OverWrite":"true","flattenFolders":"false"}},{"taskId":"ef087383-ee5e-42c7-9a53-ab56c98420f9","version":"2.*","name":"VsTest - testAssemblies","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"testSelector":"testAssemblies","testAssemblyVer2":"**\\*test*.dll\n!**\\obj\\**","testPlan":"","testSuite":"","testConfiguration":"","tcmTestRun":"$(test.RunId)","searchFolder":"$(System.DefaultWorkingDirectory)","testFiltercriteria":"","runOnlyImpactedTests":"false","runAllTestsAfterXBuilds":"50","uiTests":"false","vstestLocationMethod":"version","vsTestVersion":"latest","vstestLocation":"","runSettingsFile":"","overrideTestrunParameters":"","runInParallel":"false","runTestsInIsolation":"false","pathtoCustomTestAdapters":"","codeCoverageEnabled":"false","otherConsoleOptions":"","testRunTitle":"","platform":"","configuration":"","publishRunAttachments":"true"}}]}],"environmentOptions":{"emailNotificationType":"OnlyOnFailure","emailRecipients":"release.environment.owner;release.creator","skipArtifactsDownload":false,"timeoutInMinutes":0,"enableAccessToken":false,"publishDeploymentStatus":false},"demands":[],"conditions":[{"name":"QA-DSUI","conditionType":2,"value":"4"}],"executionPolicy":{"concurrencyCount":0,"queueDepthCount":0},"schedules":[],"retentionPolicy":{"daysToKeep":30,"releasesToKeep":3,"retainBuild":true}},{"id":54,"name":"UAT15-DSUI","rank":4,"owner":{"id":"aa6efae3-d562-4d41-ac28-eaa5dbcacad5","displayName":"Pittsley, Neil (US)","uniqueName":"NASA\\NPittsley","url":"http://teamfoundation.bcdtravel.com:8080/tfs/EnterpriseDevelopment/_apis/Identities/aa6efae3-d562-4d41-ac28-eaa5dbcacad5","imageUrl":"http://usgadtc0tfs01:8080/tfs/EnterpriseDevelopment/_api/_common/identityImage?id=aa6efae3-d562-4d41-ac28-eaa5dbcacad5"},"variables":{"target_machinename":{"value":"uscdc01dwweb015"},"dashboardreporting_connection_string":{"value":"metadata=res://*/DashboardReportingModel.csdl|res://*/DashboardReportingModel.ssdl|res://*/DashboardReportingModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=DSUAFSQL01;initial catalog=DashboardReporting;persist security info=True;user id=DashboardReporting;password=@ins67Seven;MultipleActiveResultSets=True;App=EntityFramework&quot;"},"pretrip_connection_string":{"value":"metadata=res://*/PreTripDataMartModel.csdl|res://*/PreTripDataMartModel.ssdl|res://*/PreTripDataMartModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=DSUAFSQL01;initial catalog=PreTripDataMart;user id=Reporting;password=@ins67Seven;MultipleActiveResultSets=True;App=EntityFramework&quot;"},"posttrip_connection_string":{"value":"metadata=res://*/PostTripDataModel.csdl|res://*/PostTripDataModel.ssdl|res://*/PostTripDataModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=DSUAFSQL01;initial catalog=PostTripDM;persist security info=True;user id=Reporting;password=@ins67Seven;MultipleActiveResultSets=True;App=EntityFramework&quot;"},"intelliguide_connection_string":{"value":"metadata=res://*/IntelliguideDataModel.csdl|res://*/IntelliguideDataModel.ssdl|res://*/IntelliguideDataModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=DSUAFSQL01;initial catalog=IntelliguideData;persist security info=True;user id=DashboardReporting;password=@ins67Seven;MultipleActiveResultSets=True;App=EntityFramework&quot;"},"msmq_address":{"value":"FormatName:DIRECT=OS:USCDC01DWAPP018\\private$\\sms_processing_nontrans"}},"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":226}]},"deployStep":{"tasks":[],"id":227},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":false,"isNotificationOn":false,"approver":{"id":"aa6efae3-d562-4d41-ac28-eaa5dbcacad5","displayName":"Pittsley, Neil (US)","uniqueName":"NASA\\NPittsley","url":"http://teamfoundation.bcdtravel.com:8080/tfs/EnterpriseDevelopment/_apis/Identities/aa6efae3-d562-4d41-ac28-eaa5dbcacad5","imageUrl":"http://usgadtc0tfs01:8080/tfs/EnterpriseDevelopment/_api/_common/identityImage?id=aa6efae3-d562-4d41-ac28-eaa5dbcacad5"},"id":231},{"rank":1,"isAutomated":false,"isNotificationOn":false,"approver":{"id":"63e68b1f-ca8a-4d86-9536-f6424f2e8fe5","displayName":"Wu, Wenyi (US)","uniqueName":"NASA\\wwu01","url":"http://teamfoundation.bcdtravel.com:8080/tfs/EnterpriseDevelopment/_apis/Identities/63e68b1f-ca8a-4d86-9536-f6424f2e8fe5","imageUrl":"http://usgadtc0tfs01:8080/tfs/EnterpriseDevelopment/_api/_common/identityImage?id=63e68b1f-ca8a-4d86-9536-f6424f2e8fe5"},"id":232}],"approvalOptions":{"requiredApproverCount":1,"releaseCreatorCanBeApprover":true,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMintues":43200}},"deployPhases":[{"deploymentInput":{"parallelExecution":{"parallelExecutionType":"none"},"skipArtifactsDownload":false,"timeoutInMinutes":0,"queueId":44,"demands":[],"enableAccessToken":false},"rank":1,"phaseType":1,"name":"Run on agent","workflowTasks":[{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"1.*","name":"PowerShell Script Set timestamp variable for folder naming","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"scriptType":"inlineScript","scriptName":"","arguments":"","inlineScript":"$date=$(Get-Date -UFormat \"%Y_%m_%d_%R\") | ForEach-Object{$_ -replace \":\",\"_\"}\nWrite-Host \"##vso[task.setvariable variable=timestamp]$date\"","workingFolder":"","failOnStandardError":"true"}},{"taskId":"d9bafed4-0b18-4f58-968d-86655b4d2ce9","version":"1.*","name":"Deploy Database","enabled":false,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"filename":"$(sql_package_exe_path)","arguments":"/action:publish /sourceFile:\"$(dacpac_path)\" /targetconnectionstring:\"$(db_admin_connection_string)\"","workingFolder":"","failOnStandardError":"false"}},{"taskId":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","version":"2.*","name":"Copy from CentralDeploymentDirectory to Server Deployment Directory","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"SourceFolder":"\\\\$(source_deployment_server)\\$(source_deployment_path)","Contents":"$(zip_file)","TargetFolder":"\\\\$(target_machinename)\\$(target_deployment_folder)","CleanTargetFolder":"false","OverWrite":"true","flattenFolders":"false"}},{"taskId":"5e1e3830-fbfb-11e5-aab1-090c92bc4988","version":"1.*","name":"Extract files ","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"archiveFilePatterns":"\\\\$(target_machinename)\\$(target_deployment_folder)\\$(zip_file)","destinationFolder":"\\\\$(target_machinename)\\$(target_deployment_folder)\\for_deploy","cleanDestinationFolder":"true"}},{"taskId":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","version":"2.*","name":"Copy ITSEC to Edit","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"SourceFolder":"\\\\$(target_machinename)\\$(live_web_folder)","Contents":"itsec.txt","TargetFolder":"\\\\$(target_machinename)\\$(target_deployment_folder)\\for_deploy","CleanTargetFolder":"false","OverWrite":"true","flattenFolders":"false"}},{"taskId":"a8515ec8-7254-4ffd-912c-86772e2b5962","version":"3.*","name":"Replace tokens in itsec.txt","enabled":false,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"rootDirectory":"\\\\$(target_machinename)\\$(target_deployment_folder)\\for_deploy","targetFiles":"itsec.txt","encoding":"auto","writeBOM":"true","escapeType":"auto","escapeChar":"","charsToEscape":"","verbosity":"normal","actionOnMissing":"warn","keepToken":"false","tokenPrefix":"#{","tokenSuffix":"}#","useLegacyPattern":"false","emptyValue":"(empty)","variableFiles":"","variableSeparator":".","enableTelemetry":"true"}},{"taskId":"a8515ec8-7254-4ffd-912c-86772e2b5962","version":"3.*","name":"Replace tokens in ALL  **/*.config","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"rootDirectory":"\\\\$(target_machinename)\\$(target_deployment_folder)\\for_deploy","targetFiles":"**/*.config","encoding":"auto","writeBOM":"true","escapeType":"auto","escapeChar":"","charsToEscape":"","verbosity":"normal","actionOnMissing":"warn","keepToken":"false","tokenPrefix":"#{","tokenSuffix":"}#","useLegacyPattern":"false","emptyValue":"(empty)","variableFiles":"","variableSeparator":".","enableTelemetry":"true"}},{"taskId":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","version":"2.*","name":"Copy Web Sites and Services files to LIVE","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"SourceFolder":"\\\\$(target_machinename)\\$(target_deployment_folder)\\for_deploy","Contents":"**","TargetFolder":"\\\\$(target_machinename)\\$(live_web_folder)","CleanTargetFolder":"false","OverWrite":"true","flattenFolders":"false"}},{"taskId":"ef087383-ee5e-42c7-9a53-ab56c98420f9","version":"2.*","name":"VsTest - testAssemblies","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"testSelector":"testAssemblies","testAssemblyVer2":"**\\*test*.dll\n!**\\obj\\**","testPlan":"","testSuite":"","testConfiguration":"","tcmTestRun":"$(test.RunId)","searchFolder":"$(System.DefaultWorkingDirectory)","testFiltercriteria":"","runOnlyImpactedTests":"false","runAllTestsAfterXBuilds":"50","uiTests":"false","vstestLocationMethod":"version","vsTestVersion":"latest","vstestLocation":"","runSettingsFile":"","overrideTestrunParameters":"","runInParallel":"false","runTestsInIsolation":"false","pathtoCustomTestAdapters":"","codeCoverageEnabled":"false","otherConsoleOptions":"","testRunTitle":"","platform":"","configuration":"","publishRunAttachments":"true"}}]}],"environmentOptions":{"emailNotificationType":"OnlyOnFailure","emailRecipients":"release.environment.owner;release.creator","skipArtifactsDownload":false,"timeoutInMinutes":0,"enableAccessToken":false,"publishDeploymentStatus":false},"demands":[],"conditions":[{"name":"UAT14-DSUI","conditionType":2,"value":"4"}],"executionPolicy":{"concurrencyCount":0,"queueDepthCount":0},"schedules":[],"retentionPolicy":{"daysToKeep":30,"releasesToKeep":3,"retainBuild":true}},{"id":70,"name":"Prod30-DSUI","rank":5,"owner":{"id":"aa6efae3-d562-4d41-ac28-eaa5dbcacad5","displayName":"Pittsley, Neil (US)","uniqueName":"NASA\\NPittsley","url":"http://teamfoundation.bcdtravel.com:8080/tfs/EnterpriseDevelopment/_apis/Identities/aa6efae3-d562-4d41-ac28-eaa5dbcacad5","imageUrl":"http://usgadtc0tfs01:8080/tfs/EnterpriseDevelopment/_api/_common/identityImage?id=aa6efae3-d562-4d41-ac28-eaa5dbcacad5"},"variables":{"target_machinename":{"value":"uscdc01pwweb030"},"dashboardreporting_connection_string":{"value":"metadata=res://*/DashboardReportingModel.csdl|res://*/DashboardReportingModel.ssdl|res://*/DashboardReportingModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=DBP64CLU23SQLX2;initial catalog=DashboardReporting;persist security info=True;user id=DashboardReporting;password=@Star7Seven;MultipleActiveResultSets=True;App=EntityFramework&quot;"},"pretrip_connection_string":{"value":"metadata=res://*/PreTripDataMartModel.csdl|res://*/PreTripDataMartModel.ssdl|res://*/PreTripDataMartModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=DBP64CLU23SQLX2;initial catalog=PreTripDataMart;user id=Reporting;password=@Star7Seven;MultipleActiveResultSets=True;App=EntityFramework&quot;"},"posttrip_connection_string":{"value":"metadata=res://*/PostTripDataModel.csdl|res://*/PostTripDataModel.ssdl|res://*/PostTripDataModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=DBP64CLU23SQLX2;initial catalog=PostTripDM;persist security info=True;user id=Reporting;password=@Star7Seven;MultipleActiveResultSets=True;App=EntityFramework&quot;"},"intelliguide_connection_string":{"value":"metadata=res://*/IntelliguideDataModel.csdl|res://*/IntelliguideDataModel.ssdl|res://*/IntelliguideDataModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=DBP64CLU23SQLX2;initial catalog=IntelliguideData;persist security info=True;User ID=DashboardReporting;Password=@Star7Seven;MultipleActiveResultSets=True;App=EntityFramework&quot;"},"msmq_address":{"value":"FORMATNAME:DIRECT=http://10.30.30.53/msmq/private$/sms_processing_nontrans"}},"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":false,"isNotificationOn":true,"approver":{"id":"d5a70bb5-47f9-42ba-a6c5-5dd6fd714706","displayName":"Singh, Sundeep (IN)","uniqueName":"NASA\\ssingh1","url":"http://teamfoundation.bcdtravel.com:8080/tfs/EnterpriseDevelopment/_apis/Identities/d5a70bb5-47f9-42ba-a6c5-5dd6fd714706","imageUrl":"http://usgadtc0tfs01:8080/tfs/EnterpriseDevelopment/_api/_common/identityImage?id=d5a70bb5-47f9-42ba-a6c5-5dd6fd714706"},"id":353}],"approvalOptions":{"requiredApproverCount":0,"releaseCreatorCanBeApprover":true,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMintues":43200}},"deployStep":{"tasks":[],"id":279},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":360}]},"deployPhases":[{"deploymentInput":{"parallelExecution":{"parallelExecutionType":"none"},"skipArtifactsDownload":false,"timeoutInMinutes":0,"queueId":44,"demands":[],"enableAccessToken":false},"rank":1,"phaseType":1,"name":"Run on agent","workflowTasks":[{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"1.*","name":"PowerShell Script Set timestamp variable for folder naming","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"scriptType":"inlineScript","scriptName":"","arguments":"","inlineScript":"$date=$(Get-Date -UFormat \"%Y_%m_%d_%R\") | ForEach-Object{$_ -replace \":\",\"_\"}\nWrite-Host \"##vso[task.setvariable variable=timestamp]$date\"","workingFolder":"","failOnStandardError":"true"}},{"taskId":"d9bafed4-0b18-4f58-968d-86655b4d2ce9","version":"1.*","name":"Deploy Database","enabled":false,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"filename":"$(sql_package_exe_path)","arguments":"/action:publish /sourceFile:\"$(dacpac_path)\" /targetconnectionstring:\"$(db_admin_connection_string)\"","workingFolder":"","failOnStandardError":"false"}},{"taskId":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","version":"2.*","name":"Copy from CentralDeploymentDirectory to Server Deployment Directory","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"SourceFolder":"\\\\$(source_deployment_server)\\$(source_deployment_path)","Contents":"$(zip_file)","TargetFolder":"\\\\$(target_machinename)\\$(target_deployment_folder)","CleanTargetFolder":"false","OverWrite":"true","flattenFolders":"false"}},{"taskId":"5e1e3830-fbfb-11e5-aab1-090c92bc4988","version":"1.*","name":"Extract files ","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"archiveFilePatterns":"\\\\$(target_machinename)\\$(target_deployment_folder)\\$(zip_file)","destinationFolder":"\\\\$(target_machinename)\\$(target_deployment_folder)\\for_deploy","cleanDestinationFolder":"true"}},{"taskId":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","version":"2.*","name":"Copy ITSEC to Edit","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"SourceFolder":"\\\\$(target_machinename)\\$(live_web_folder)","Contents":"itsec.txt","TargetFolder":"\\\\$(target_machinename)\\$(target_deployment_folder)\\for_deploy","CleanTargetFolder":"false","OverWrite":"true","flattenFolders":"false"}},{"taskId":"a8515ec8-7254-4ffd-912c-86772e2b5962","version":"3.*","name":"Replace tokens in itsec.txt","enabled":false,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"rootDirectory":"\\\\$(target_machinename)\\$(target_deployment_folder)\\for_deploy","targetFiles":"itsec.txt","encoding":"auto","writeBOM":"true","escapeType":"auto","escapeChar":"","charsToEscape":"","verbosity":"normal","actionOnMissing":"warn","keepToken":"false","tokenPrefix":"#{","tokenSuffix":"}#","useLegacyPattern":"false","emptyValue":"(empty)","variableFiles":"","variableSeparator":".","enableTelemetry":"true"}},{"taskId":"a8515ec8-7254-4ffd-912c-86772e2b5962","version":"3.*","name":"Replace tokens in ALL  **/*.config","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"rootDirectory":"\\\\$(target_machinename)\\$(target_deployment_folder)\\for_deploy","targetFiles":"**/*.config","encoding":"auto","writeBOM":"true","escapeType":"auto","escapeChar":"","charsToEscape":"","verbosity":"normal","actionOnMissing":"warn","keepToken":"false","tokenPrefix":"#{","tokenSuffix":"}#","useLegacyPattern":"false","emptyValue":"(empty)","variableFiles":"","variableSeparator":".","enableTelemetry":"true"}},{"taskId":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","version":"2.*","name":"Copy Web Sites and Services files to LIVE","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"SourceFolder":"\\\\$(target_machinename)\\$(target_deployment_folder)\\for_deploy","Contents":"**","TargetFolder":"\\\\$(target_machinename)\\$(live_web_folder)","CleanTargetFolder":"false","OverWrite":"true","flattenFolders":"false"}},{"taskId":"ef087383-ee5e-42c7-9a53-ab56c98420f9","version":"2.*","name":"VsTest - testAssemblies","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"testSelector":"testAssemblies","testAssemblyVer2":"**\\*test*.dll\n!**\\obj\\**","testPlan":"","testSuite":"","testConfiguration":"","tcmTestRun":"$(test.RunId)","searchFolder":"$(System.DefaultWorkingDirectory)","testFiltercriteria":"","runOnlyImpactedTests":"false","runAllTestsAfterXBuilds":"50","uiTests":"false","vstestLocationMethod":"version","vsTestVersion":"latest","vstestLocation":"","runSettingsFile":"","overrideTestrunParameters":"","runInParallel":"false","runTestsInIsolation":"false","pathtoCustomTestAdapters":"","codeCoverageEnabled":"false","otherConsoleOptions":"","testRunTitle":"","platform":"","configuration":"","publishRunAttachments":"true"}}]}],"environmentOptions":{"emailNotificationType":"OnlyOnFailure","emailRecipients":"release.environment.owner;release.creator","skipArtifactsDownload":false,"timeoutInMinutes":0,"enableAccessToken":false,"publishDeploymentStatus":false},"demands":[],"conditions":[{"name":"UAT15-DSUI","conditionType":2,"value":"4"}],"executionPolicy":{"concurrencyCount":0,"queueDepthCount":0},"schedules":[],"retentionPolicy":{"daysToKeep":30,"releasesToKeep":3,"retainBuild":true}},{"id":77,"name":"Prod31-DSUI","rank":6,"owner":{"id":"aa6efae3-d562-4d41-ac28-eaa5dbcacad5","displayName":"Pittsley, Neil (US)","uniqueName":"NASA\\NPittsley","url":"http://teamfoundation.bcdtravel.com:8080/tfs/EnterpriseDevelopment/_apis/Identities/aa6efae3-d562-4d41-ac28-eaa5dbcacad5","imageUrl":"http://usgadtc0tfs01:8080/tfs/EnterpriseDevelopment/_api/_common/identityImage?id=aa6efae3-d562-4d41-ac28-eaa5dbcacad5"},"variables":{"target_machinename":{"value":"uscdc01pwweb031"},"dashboardreporting_connection_string":{"value":"metadata=res://*/DashboardReportingModel.csdl|res://*/DashboardReportingModel.ssdl|res://*/DashboardReportingModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=DBP64CLU23SQLX2;initial catalog=DashboardReporting;persist security info=True;user id=DashboardReporting;password=@Star7Seven;MultipleActiveResultSets=True;App=EntityFramework&quot;"},"pretrip_connection_string":{"value":"metadata=res://*/PreTripDataMartModel.csdl|res://*/PreTripDataMartModel.ssdl|res://*/PreTripDataMartModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=DBP64CLU23SQLX2;initial catalog=PreTripDataMart;user id=Reporting;password=@Star7Seven;MultipleActiveResultSets=True;App=EntityFramework&quot;"},"posttrip_connection_string":{"value":"metadata=res://*/PostTripDataModel.csdl|res://*/PostTripDataModel.ssdl|res://*/PostTripDataModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=DBP64CLU23SQLX2;initial catalog=PostTripDM;persist security info=True;user id=Reporting;password=@Star7Seven;MultipleActiveResultSets=True;App=EntityFramework&quot;"},"intelliguide_connection_string":{"value":"metadata=res://*/IntelliguideDataModel.csdl|res://*/IntelliguideDataModel.ssdl|res://*/IntelliguideDataModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=DBP64CLU23SQLX2;initial catalog=IntelliguideData;persist security info=True;User ID=DashboardReporting;Password=@Star7Seven;MultipleActiveResultSets=True;App=EntityFramework&quot;"},"msmq_address":{"value":"FORMATNAME:DIRECT=http://10.30.30.53/msmq/private$/sms_processing_nontrans"}},"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":false,"isNotificationOn":true,"approver":{"id":"d5a70bb5-47f9-42ba-a6c5-5dd6fd714706","displayName":"Singh, Sundeep (IN)","uniqueName":"NASA\\ssingh1","url":"http://teamfoundation.bcdtravel.com:8080/tfs/EnterpriseDevelopment/_apis/Identities/d5a70bb5-47f9-42ba-a6c5-5dd6fd714706","imageUrl":"http://usgadtc0tfs01:8080/tfs/EnterpriseDevelopment/_api/_common/identityImage?id=d5a70bb5-47f9-42ba-a6c5-5dd6fd714706"},"id":354}],"approvalOptions":{"requiredApproverCount":0,"releaseCreatorCanBeApprover":true,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMintues":43200}},"deployStep":{"tasks":[],"id":305},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":359}]},"deployPhases":[{"deploymentInput":{"parallelExecution":{"parallelExecutionType":"none"},"skipArtifactsDownload":false,"timeoutInMinutes":0,"queueId":44,"demands":[],"enableAccessToken":false},"rank":1,"phaseType":1,"name":"Run on agent","workflowTasks":[{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"1.*","name":"PowerShell Script Set timestamp variable for folder naming","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"scriptType":"inlineScript","scriptName":"","arguments":"","inlineScript":"$date=$(Get-Date -UFormat \"%Y_%m_%d_%R\") | ForEach-Object{$_ -replace \":\",\"_\"}\nWrite-Host \"##vso[task.setvariable variable=timestamp]$date\"","workingFolder":"","failOnStandardError":"true"}},{"taskId":"d9bafed4-0b18-4f58-968d-86655b4d2ce9","version":"1.*","name":"Deploy Database","enabled":false,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"filename":"$(sql_package_exe_path)","arguments":"/action:publish /sourceFile:\"$(dacpac_path)\" /targetconnectionstring:\"$(db_admin_connection_string)\"","workingFolder":"","failOnStandardError":"false"}},{"taskId":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","version":"2.*","name":"Copy from CentralDeploymentDirectory to Server Deployment Directory","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"SourceFolder":"\\\\$(source_deployment_server)\\$(source_deployment_path)","Contents":"$(zip_file)","TargetFolder":"\\\\$(target_machinename)\\$(target_deployment_folder)","CleanTargetFolder":"false","OverWrite":"true","flattenFolders":"false"}},{"taskId":"5e1e3830-fbfb-11e5-aab1-090c92bc4988","version":"1.*","name":"Extract files ","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"archiveFilePatterns":"\\\\$(target_machinename)\\$(target_deployment_folder)\\$(zip_file)","destinationFolder":"\\\\$(target_machinename)\\$(target_deployment_folder)\\for_deploy","cleanDestinationFolder":"true"}},{"taskId":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","version":"2.*","name":"Copy ITSEC to Edit","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"SourceFolder":"\\\\$(target_machinename)\\$(live_web_folder)","Contents":"itsec.txt","TargetFolder":"\\\\$(target_machinename)\\$(target_deployment_folder)\\for_deploy","CleanTargetFolder":"false","OverWrite":"true","flattenFolders":"false"}},{"taskId":"a8515ec8-7254-4ffd-912c-86772e2b5962","version":"3.*","name":"Replace tokens in itsec.txt","enabled":false,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"rootDirectory":"\\\\$(target_machinename)\\$(target_deployment_folder)\\for_deploy","targetFiles":"itsec.txt","encoding":"auto","writeBOM":"true","escapeType":"auto","escapeChar":"","charsToEscape":"","verbosity":"normal","actionOnMissing":"warn","keepToken":"false","tokenPrefix":"#{","tokenSuffix":"}#","useLegacyPattern":"false","emptyValue":"(empty)","variableFiles":"","variableSeparator":".","enableTelemetry":"true"}},{"taskId":"a8515ec8-7254-4ffd-912c-86772e2b5962","version":"3.*","name":"Replace tokens in ALL  **/*.config","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"rootDirectory":"\\\\$(target_machinename)\\$(target_deployment_folder)\\for_deploy","targetFiles":"**/*.config","encoding":"auto","writeBOM":"true","escapeType":"auto","escapeChar":"","charsToEscape":"","verbosity":"normal","actionOnMissing":"warn","keepToken":"false","tokenPrefix":"#{","tokenSuffix":"}#","useLegacyPattern":"false","emptyValue":"(empty)","variableFiles":"","variableSeparator":".","enableTelemetry":"true"}},{"taskId":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","version":"2.*","name":"Copy Web Sites and Services files to LIVE","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"SourceFolder":"\\\\$(target_machinename)\\$(target_deployment_folder)\\for_deploy","Contents":"**","TargetFolder":"\\\\$(target_machinename)\\$(live_web_folder)","CleanTargetFolder":"false","OverWrite":"true","flattenFolders":"false"}},{"taskId":"ef087383-ee5e-42c7-9a53-ab56c98420f9","version":"2.*","name":"VsTest - testAssemblies","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"testSelector":"testAssemblies","testAssemblyVer2":"**\\*test*.dll\n!**\\obj\\**","testPlan":"","testSuite":"","testConfiguration":"","tcmTestRun":"$(test.RunId)","searchFolder":"$(System.DefaultWorkingDirectory)","testFiltercriteria":"","runOnlyImpactedTests":"false","runAllTestsAfterXBuilds":"50","uiTests":"false","vstestLocationMethod":"version","vsTestVersion":"latest","vstestLocation":"","runSettingsFile":"","overrideTestrunParameters":"","runInParallel":"false","runTestsInIsolation":"false","pathtoCustomTestAdapters":"","codeCoverageEnabled":"false","otherConsoleOptions":"","testRunTitle":"","platform":"","configuration":"","publishRunAttachments":"true"}}]}],"environmentOptions":{"emailNotificationType":"OnlyOnFailure","emailRecipients":"release.environment.owner;release.creator","skipArtifactsDownload":false,"timeoutInMinutes":0,"enableAccessToken":false,"publishDeploymentStatus":false},"demands":[],"conditions":[{"name":"Prod30-DSUI","conditionType":2,"value":"4"}],"executionPolicy":{"concurrencyCount":0,"queueDepthCount":0},"schedules":[],"retentionPolicy":{"daysToKeep":30,"releasesToKeep":3,"retainBuild":true}},{"id":78,"name":"Prod32-DSUI","rank":7,"owner":{"id":"aa6efae3-d562-4d41-ac28-eaa5dbcacad5","displayName":"Pittsley, Neil (US)","uniqueName":"NASA\\NPittsley","url":"http://teamfoundation.bcdtravel.com:8080/tfs/EnterpriseDevelopment/_apis/Identities/aa6efae3-d562-4d41-ac28-eaa5dbcacad5","imageUrl":"http://usgadtc0tfs01:8080/tfs/EnterpriseDevelopment/_api/_common/identityImage?id=aa6efae3-d562-4d41-ac28-eaa5dbcacad5"},"variables":{"target_machinename":{"value":"uscdc01pwweb032"},"dashboardreporting_connection_string":{"value":"metadata=res://*/DashboardReportingModel.csdl|res://*/DashboardReportingModel.ssdl|res://*/DashboardReportingModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=DBP64CLU23SQLX2;initial catalog=DashboardReporting;persist security info=True;user id=DashboardReporting;password=@Star7Seven;MultipleActiveResultSets=True;App=EntityFramework&quot;"},"pretrip_connection_string":{"value":"metadata=res://*/PreTripDataMartModel.csdl|res://*/PreTripDataMartModel.ssdl|res://*/PreTripDataMartModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=DBP64CLU23SQLX2;initial catalog=PreTripDataMart;user id=Reporting;password=@Star7Seven;MultipleActiveResultSets=True;App=EntityFramework&quot;"},"posttrip_connection_string":{"value":"metadata=res://*/PostTripDataModel.csdl|res://*/PostTripDataModel.ssdl|res://*/PostTripDataModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=DBP64CLU23SQLX2;initial catalog=PostTripDM;persist security info=True;user id=Reporting;password=@Star7Seven;MultipleActiveResultSets=True;App=EntityFramework&quot;"},"intelliguide_connection_string":{"value":"metadata=res://*/IntelliguideDataModel.csdl|res://*/IntelliguideDataModel.ssdl|res://*/IntelliguideDataModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=DBP64CLU23SQLX2;initial catalog=IntelliguideData;persist security info=True;User ID=DashboardReporting;Password=@Star7Seven;MultipleActiveResultSets=True;App=EntityFramework&quot;"},"msmq_address":{"value":"FORMATNAME:DIRECT=http://10.30.30.53/msmq/private$/sms_processing_nontrans"}},"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":false,"isNotificationOn":true,"approver":{"id":"d5a70bb5-47f9-42ba-a6c5-5dd6fd714706","displayName":"Singh, Sundeep (IN)","uniqueName":"NASA\\ssingh1","url":"http://teamfoundation.bcdtravel.com:8080/tfs/EnterpriseDevelopment/_apis/Identities/d5a70bb5-47f9-42ba-a6c5-5dd6fd714706","imageUrl":"http://usgadtc0tfs01:8080/tfs/EnterpriseDevelopment/_api/_common/identityImage?id=d5a70bb5-47f9-42ba-a6c5-5dd6fd714706"},"id":355}],"approvalOptions":{"requiredApproverCount":0,"releaseCreatorCanBeApprover":true,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMintues":43200}},"deployStep":{"tasks":[],"id":304},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":358}]},"deployPhases":[{"deploymentInput":{"parallelExecution":{"parallelExecutionType":"none"},"skipArtifactsDownload":false,"timeoutInMinutes":0,"queueId":44,"demands":[],"enableAccessToken":false},"rank":1,"phaseType":1,"name":"Run on agent","workflowTasks":[{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"1.*","name":"PowerShell Script Set timestamp variable for folder naming","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"scriptType":"inlineScript","scriptName":"","arguments":"","inlineScript":"$date=$(Get-Date -UFormat \"%Y_%m_%d_%R\") | ForEach-Object{$_ -replace \":\",\"_\"}\nWrite-Host \"##vso[task.setvariable variable=timestamp]$date\"","workingFolder":"","failOnStandardError":"true"}},{"taskId":"d9bafed4-0b18-4f58-968d-86655b4d2ce9","version":"1.*","name":"Deploy Database","enabled":false,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"filename":"$(sql_package_exe_path)","arguments":"/action:publish /sourceFile:\"$(dacpac_path)\" /targetconnectionstring:\"$(db_admin_connection_string)\"","workingFolder":"","failOnStandardError":"false"}},{"taskId":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","version":"2.*","name":"Copy from CentralDeploymentDirectory to Server Deployment Directory","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"SourceFolder":"\\\\$(source_deployment_server)\\$(source_deployment_path)","Contents":"$(zip_file)","TargetFolder":"\\\\$(target_machinename)\\$(target_deployment_folder)","CleanTargetFolder":"false","OverWrite":"true","flattenFolders":"false"}},{"taskId":"5e1e3830-fbfb-11e5-aab1-090c92bc4988","version":"1.*","name":"Extract files ","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"archiveFilePatterns":"\\\\$(target_machinename)\\$(target_deployment_folder)\\$(zip_file)","destinationFolder":"\\\\$(target_machinename)\\$(target_deployment_folder)\\for_deploy","cleanDestinationFolder":"true"}},{"taskId":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","version":"2.*","name":"Copy ITSEC to Edit","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"SourceFolder":"\\\\$(target_machinename)\\$(live_web_folder)","Contents":"itsec.txt","TargetFolder":"\\\\$(target_machinename)\\$(target_deployment_folder)\\for_deploy","CleanTargetFolder":"false","OverWrite":"true","flattenFolders":"false"}},{"taskId":"a8515ec8-7254-4ffd-912c-86772e2b5962","version":"3.*","name":"Replace tokens in itsec.txt","enabled":false,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"rootDirectory":"\\\\$(target_machinename)\\$(target_deployment_folder)\\for_deploy","targetFiles":"itsec.txt","encoding":"auto","writeBOM":"true","escapeType":"auto","escapeChar":"","charsToEscape":"","verbosity":"normal","actionOnMissing":"warn","keepToken":"false","tokenPrefix":"#{","tokenSuffix":"}#","useLegacyPattern":"false","emptyValue":"(empty)","variableFiles":"","variableSeparator":".","enableTelemetry":"true"}},{"taskId":"a8515ec8-7254-4ffd-912c-86772e2b5962","version":"3.*","name":"Replace tokens in ALL  **/*.config","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"rootDirectory":"\\\\$(target_machinename)\\$(target_deployment_folder)\\for_deploy","targetFiles":"**/*.config","encoding":"auto","writeBOM":"true","escapeType":"auto","escapeChar":"","charsToEscape":"","verbosity":"normal","actionOnMissing":"warn","keepToken":"false","tokenPrefix":"#{","tokenSuffix":"}#","useLegacyPattern":"false","emptyValue":"(empty)","variableFiles":"","variableSeparator":".","enableTelemetry":"true"}},{"taskId":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","version":"2.*","name":"Copy Web Sites and Services files to LIVE","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"SourceFolder":"\\\\$(target_machinename)\\$(target_deployment_folder)\\for_deploy","Contents":"**","TargetFolder":"\\\\$(target_machinename)\\$(live_web_folder)","CleanTargetFolder":"false","OverWrite":"true","flattenFolders":"false"}},{"taskId":"ef087383-ee5e-42c7-9a53-ab56c98420f9","version":"2.*","name":"VsTest - testAssemblies","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"testSelector":"testAssemblies","testAssemblyVer2":"**\\*test*.dll\n!**\\obj\\**","testPlan":"","testSuite":"","testConfiguration":"","tcmTestRun":"$(test.RunId)","searchFolder":"$(System.DefaultWorkingDirectory)","testFiltercriteria":"","runOnlyImpactedTests":"false","runAllTestsAfterXBuilds":"50","uiTests":"false","vstestLocationMethod":"version","vsTestVersion":"latest","vstestLocation":"","runSettingsFile":"","overrideTestrunParameters":"","runInParallel":"false","runTestsInIsolation":"false","pathtoCustomTestAdapters":"","codeCoverageEnabled":"false","otherConsoleOptions":"","testRunTitle":"","platform":"","configuration":"","publishRunAttachments":"true"}}]}],"environmentOptions":{"emailNotificationType":"OnlyOnFailure","emailRecipients":"release.environment.owner;release.creator","skipArtifactsDownload":false,"timeoutInMinutes":0,"enableAccessToken":false,"publishDeploymentStatus":false},"demands":[],"conditions":[{"name":"Prod31-DSUI","conditionType":2,"value":"4"}],"executionPolicy":{"concurrencyCount":0,"queueDepthCount":0},"schedules":[],"retentionPolicy":{"daysToKeep":30,"releasesToKeep":3,"retainBuild":true}},{"id":79,"name":"Prod33-DSUI","rank":8,"owner":{"id":"aa6efae3-d562-4d41-ac28-eaa5dbcacad5","displayName":"Pittsley, Neil (US)","uniqueName":"NASA\\NPittsley","url":"http://teamfoundation.bcdtravel.com:8080/tfs/EnterpriseDevelopment/_apis/Identities/aa6efae3-d562-4d41-ac28-eaa5dbcacad5","imageUrl":"http://usgadtc0tfs01:8080/tfs/EnterpriseDevelopment/_api/_common/identityImage?id=aa6efae3-d562-4d41-ac28-eaa5dbcacad5"},"variables":{"target_machinename":{"value":"uscdc01pwweb033"},"dashboardreporting_connection_string":{"value":"metadata=res://*/DashboardReportingModel.csdl|res://*/DashboardReportingModel.ssdl|res://*/DashboardReportingModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=DBP64CLU23SQLX2;initial catalog=DashboardReporting;persist security info=True;user id=DashboardReporting;password=@Star7Seven;MultipleActiveResultSets=True;App=EntityFramework&quot;"},"pretrip_connection_string":{"value":"metadata=res://*/PreTripDataMartModel.csdl|res://*/PreTripDataMartModel.ssdl|res://*/PreTripDataMartModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=DBP64CLU23SQLX2;initial catalog=PreTripDataMart;user id=Reporting;password=@Star7Seven;MultipleActiveResultSets=True;App=EntityFramework&quot;"},"posttrip_connection_string":{"value":"metadata=res://*/PostTripDataModel.csdl|res://*/PostTripDataModel.ssdl|res://*/PostTripDataModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=DBP64CLU23SQLX2;initial catalog=PostTripDM;persist security info=True;user id=Reporting;password=@Star7Seven;MultipleActiveResultSets=True;App=EntityFramework&quot;"},"intelliguide_connection_string":{"value":"metadata=res://*/IntelliguideDataModel.csdl|res://*/IntelliguideDataModel.ssdl|res://*/IntelliguideDataModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=DBP64CLU23SQLX2;initial catalog=IntelliguideData;persist security info=True;User ID=DashboardReporting;Password=@Star7Seven;MultipleActiveResultSets=True;App=EntityFramework&quot;"},"msmq_address":{"value":"FORMATNAME:DIRECT=http://10.30.30.53/msmq/private$/sms_processing_nontrans"}},"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":false,"isNotificationOn":true,"approver":{"id":"d5a70bb5-47f9-42ba-a6c5-5dd6fd714706","displayName":"Singh, Sundeep (IN)","uniqueName":"NASA\\ssingh1","url":"http://teamfoundation.bcdtravel.com:8080/tfs/EnterpriseDevelopment/_apis/Identities/d5a70bb5-47f9-42ba-a6c5-5dd6fd714706","imageUrl":"http://usgadtc0tfs01:8080/tfs/EnterpriseDevelopment/_api/_common/identityImage?id=d5a70bb5-47f9-42ba-a6c5-5dd6fd714706"},"id":356}],"approvalOptions":{"requiredApproverCount":0,"releaseCreatorCanBeApprover":true,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMintues":43200}},"deployStep":{"tasks":[],"id":303},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":357}]},"deployPhases":[{"deploymentInput":{"parallelExecution":{"parallelExecutionType":"none"},"skipArtifactsDownload":false,"timeoutInMinutes":0,"queueId":44,"demands":[],"enableAccessToken":false},"rank":1,"phaseType":1,"name":"Run on agent","workflowTasks":[{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"1.*","name":"PowerShell Script Set timestamp variable for folder naming","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"scriptType":"inlineScript","scriptName":"","arguments":"","inlineScript":"$date=$(Get-Date -UFormat \"%Y_%m_%d_%R\") | ForEach-Object{$_ -replace \":\",\"_\"}\nWrite-Host \"##vso[task.setvariable variable=timestamp]$date\"","workingFolder":"","failOnStandardError":"true"}},{"taskId":"d9bafed4-0b18-4f58-968d-86655b4d2ce9","version":"1.*","name":"Deploy Database","enabled":false,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"filename":"$(sql_package_exe_path)","arguments":"/action:publish /sourceFile:\"$(dacpac_path)\" /targetconnectionstring:\"$(db_admin_connection_string)\"","workingFolder":"","failOnStandardError":"false"}},{"taskId":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","version":"2.*","name":"Copy from CentralDeploymentDirectory to Server Deployment Directory","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"SourceFolder":"\\\\$(source_deployment_server)\\$(source_deployment_path)","Contents":"$(zip_file)","TargetFolder":"\\\\$(target_machinename)\\$(target_deployment_folder)","CleanTargetFolder":"false","OverWrite":"true","flattenFolders":"false"}},{"taskId":"5e1e3830-fbfb-11e5-aab1-090c92bc4988","version":"1.*","name":"Extract files ","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"archiveFilePatterns":"\\\\$(target_machinename)\\$(target_deployment_folder)\\$(zip_file)","destinationFolder":"\\\\$(target_machinename)\\$(target_deployment_folder)\\for_deploy","cleanDestinationFolder":"true"}},{"taskId":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","version":"2.*","name":"Copy ITSEC to Edit","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"SourceFolder":"\\\\$(target_machinename)\\$(live_web_folder)","Contents":"itsec.txt","TargetFolder":"\\\\$(target_machinename)\\$(target_deployment_folder)\\for_deploy","CleanTargetFolder":"false","OverWrite":"true","flattenFolders":"false"}},{"taskId":"a8515ec8-7254-4ffd-912c-86772e2b5962","version":"3.*","name":"Replace tokens in itsec.txt","enabled":false,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"rootDirectory":"\\\\$(target_machinename)\\$(target_deployment_folder)\\for_deploy","targetFiles":"itsec.txt","encoding":"auto","writeBOM":"true","escapeType":"auto","escapeChar":"","charsToEscape":"","verbosity":"normal","actionOnMissing":"warn","keepToken":"false","tokenPrefix":"#{","tokenSuffix":"}#","useLegacyPattern":"false","emptyValue":"(empty)","variableFiles":"","variableSeparator":".","enableTelemetry":"true"}},{"taskId":"a8515ec8-7254-4ffd-912c-86772e2b5962","version":"3.*","name":"Replace tokens in ALL  **/*.config","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"rootDirectory":"\\\\$(target_machinename)\\$(target_deployment_folder)\\for_deploy","targetFiles":"**/*.config","encoding":"auto","writeBOM":"true","escapeType":"auto","escapeChar":"","charsToEscape":"","verbosity":"normal","actionOnMissing":"warn","keepToken":"false","tokenPrefix":"#{","tokenSuffix":"}#","useLegacyPattern":"false","emptyValue":"(empty)","variableFiles":"","variableSeparator":".","enableTelemetry":"true"}},{"taskId":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","version":"2.*","name":"Copy Web Sites and Services files to LIVE","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"SourceFolder":"\\\\$(target_machinename)\\$(target_deployment_folder)\\for_deploy","Contents":"**","TargetFolder":"\\\\$(target_machinename)\\$(live_web_folder)","CleanTargetFolder":"false","OverWrite":"true","flattenFolders":"false"}},{"taskId":"ef087383-ee5e-42c7-9a53-ab56c98420f9","version":"2.*","name":"VsTest - testAssemblies","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"testSelector":"testAssemblies","testAssemblyVer2":"**\\*test*.dll\n!**\\obj\\**","testPlan":"","testSuite":"","testConfiguration":"","tcmTestRun":"$(test.RunId)","searchFolder":"$(System.DefaultWorkingDirectory)","testFiltercriteria":"","runOnlyImpactedTests":"false","runAllTestsAfterXBuilds":"50","uiTests":"false","vstestLocationMethod":"version","vsTestVersion":"latest","vstestLocation":"","runSettingsFile":"","overrideTestrunParameters":"","runInParallel":"false","runTestsInIsolation":"false","pathtoCustomTestAdapters":"","codeCoverageEnabled":"false","otherConsoleOptions":"","testRunTitle":"","platform":"","configuration":"","publishRunAttachments":"true"}}]}],"environmentOptions":{"emailNotificationType":"OnlyOnFailure","emailRecipients":"release.environment.owner;release.creator","skipArtifactsDownload":false,"timeoutInMinutes":0,"enableAccessToken":false,"publishDeploymentStatus":false},"demands":[],"conditions":[{"name":"Prod32-DSUI","conditionType":2,"value":"4"}],"executionPolicy":{"concurrencyCount":0,"queueDepthCount":0},"schedules":[],"retentionPolicy":{"daysToKeep":30,"releasesToKeep":3,"retainBuild":true}}],"artifacts":[{"sourceId":"da5251f5-3c5d-4f39-b901-a03fb6aea608:263","type":"Build","alias":"DSUI_DSWeb_Package","definitionReference":{"artifactSourceDefinitionUrl":{"id":"http://usgadtc0tfs01:8080/tfs/_permalink/_build/index?collectionId=fefc5b29-2dc4-499d-9ee3-90cae31e2cc8&projectId=da5251f5-3c5d-4f39-b901-a03fb6aea608&definitionId=263","name":""},"defaultVersionBranch":{"id":"","name":""},"defaultVersionSpecific":{"id":"","name":""},"defaultVersionTags":{"id":"","name":""},"defaultVersionType":{"id":"latestType","name":"Latest"},"definition":{"id":"263","name":"DSUI_DSWeb_Package"},"project":{"id":"da5251f5-3c5d-4f39-b901-a03fb6aea608","name":"DecisionSource"}},"isPrimary":true}],"triggers":[],"releaseNameFormat":"Release-$(Build.BuildNumber)-$(rev:r)","url":"http://usgadtc0tfs01:8080/tfs/EnterpriseDevelopment/da5251f5-3c5d-4f39-b901-a03fb6aea608/_apis/Release/definitions/8","_links":{"self":{"href":"http://usgadtc0tfs01:8080/tfs/EnterpriseDevelopment/da5251f5-3c5d-4f39-b901-a03fb6aea608/_apis/Release/definitions/8"},"web":{"href":"http://usgadtc0tfs01:8080/tfs/EnterpriseDevelopment/da5251f5-3c5d-4f39-b901-a03fb6aea608/_release?definitionId=8"}},"tags":[],"properties":{}}